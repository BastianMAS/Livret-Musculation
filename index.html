<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Livret Musculation CAP</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; 
            min-height: 100vh;
            background: linear-gradient(135deg, #0f172a 0%, #1e3a8a 50%, #0f172a 100%);
        }
        .container { max-width: 1200px; margin: 0 auto; padding: 1rem; }
        .card { 
            background: rgba(255, 255, 255, 0.1); 
            backdrop-filter: blur(10px);
            border-radius: 1.5rem; 
            padding: 2rem; 
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            margin-bottom: 1.5rem;
        }
        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
            font-size: 1rem;
        }
        .btn:hover { transform: scale(1.05); }
        .btn-primary { 
            background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%);
            color: white;
        }
        .btn-success { 
            background: linear-gradient(135deg, #10b981 0%, #14b8a6 100%);
            color: white;
        }
        .btn-secondary { 
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }
        .btn-danger { 
            background: rgba(239, 68, 68, 0.2);
            color: #fca5a5;
        }
        .btn-warning {
            background: linear-gradient(135deg, #f97316 0%, #fb923c 100%);
            color: white;
        }
        .btn-link {
            background: transparent;
            color: #67e8f9;
            text-decoration: underline;
            padding: 0.5rem;
            font-size: 0.875rem;
        }
        .input {
            width: 100%;
            padding: 0.75rem 1rem;
            border-radius: 0.75rem;
            border: 2px solid rgba(255, 255, 255, 0.3);
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
        }
        .input::placeholder { color: rgba(255, 255, 255, 0.5); }
        .input:focus { outline: none; border-color: #06b6d4; }
        select.input { 
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='white' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 0.75rem center;
            background-size: 1rem;
            padding-right: 2.5rem;
        }
        .text-white { color: white; }
        .text-cyan { color: #67e8f9; }
        .text-center { text-align: center; }
        .mb-1 { margin-bottom: 0.5rem; }
        .mb-2 { margin-bottom: 1rem; }
        .mb-4 { margin-bottom: 2rem; }
        .mt-2 { margin-top: 1rem; }
        .flex { display: flex; }
        .flex-col { flex-direction: column; }
        .items-center { align-items: center; }
        .justify-between { justify-content: space-between; }
        .gap-2 { gap: 0.5rem; }
        .gap-3 { gap: 1rem; }
        .grid { display: grid; }
        .grid-cols-2 { grid-template-columns: repeat(2, 1fr); }
        .grid-cols-3 { grid-template-columns: repeat(3, 1fr); }
        .grid-cols-5 { grid-template-columns: repeat(5, 1fr); }
        .hidden { display: none; }
        .muscle-btn {
            padding: 0.75rem;
            border-radius: 0.75rem;
            border: none;
            font-weight: 500;
            cursor: pointer;
            background: rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.7);
            transition: all 0.2s;
            font-size: 0.85rem;
        }
        .muscle-btn.active {
            background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%);
            color: white;
            transform: scale(1.05);
        }
        .session-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            cursor: pointer;
        }
        .session-card:hover { background: rgba(255, 255, 255, 0.15); }
        .badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.875rem;
            font-weight: 500;
        }
        .badge-force { background: linear-gradient(135deg, #f97316 0%, #fb923c 100%); color: white; }
        .badge-endurance { background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%); color: white; }
        .badge-equilibre { background: linear-gradient(135deg, #10b981 0%, #14b8a6 100%); color: white; }
        .lock-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%);
            border-radius: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
        }
        .tab-btn {
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            background: rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.7);
        }
        .tab-btn.active {
            background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%);
            color: white;
        }
        .rm-result {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.2) 0%, rgba(20, 184, 166, 0.2) 100%);
            border: 2px solid rgba(16, 185, 129, 0.5);
            border-radius: 1rem;
            padding: 2rem;
            text-align: center;
            margin: 1.5rem 0;
        }
        
        .sub-tab-btn {
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            border: none;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            background: rgba(255, 255, 255, 0.05);
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
        }
        .sub-tab-btn.active {
            background: rgba(6, 182, 212, 0.3);
            color: white;
        }
        
        .content-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 1rem;
            padding: 1.5rem;
            margin-top: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .exercise-card {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 0.75rem;
            padding: 1.25rem;
            margin-bottom: 1rem;
            border: 1px solid rgba(255, 255, 255, 0.15);
        }
        
        .exercise-card h4 {
            color: #67e8f9;
            margin-bottom: 0.75rem;
            font-size: 1.1rem;
        }
        
        .exercise-card ul {
            list-style: none;
            padding-left: 0;
        }
        
        .exercise-card li {
            color: rgba(255, 255, 255, 0.85);
            padding: 0.4rem 0;
            padding-left: 1.5rem;
            position: relative;
        }
        
        .exercise-card li:before {
            content: "‚Üí";
            position: absolute;
            left: 0;
            color: #06b6d4;
        }
        
        .tip-box {
            background: rgba(16, 185, 129, 0.15);
            border-left: 4px solid #10b981;
            border-radius: 0.5rem;
            padding: 1rem;
            margin: 1rem 0;
        }
        
        .warning-box {
            background: rgba(251, 146, 60, 0.15);
            border-left: 4px solid #fb923c;
            border-radius: 0.5rem;
            padding: 1rem;
            margin: 1rem 0;
        }

        .circuit-exercise {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 0.75rem;
            padding: 1rem;
            margin-bottom: 0.75rem;
            border: 1px solid rgba(255, 255, 255, 0.15);
        }

        .radio-group {
            display: flex;
            gap: 1rem;
        }

        .radio-label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: white;
            cursor: pointer;
        }

        .radio-label input[type="radio"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
        
        .anatomy-image-container {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 1rem;
            padding: 1rem;
            border: 2px solid rgba(255, 255, 255, 0.2);
            text-align: center;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .anatomy-image-container img {
            width: 100%;
            height: auto;
            border-radius: 0.75rem;
            margin-bottom: 0.5rem;
        }
        
        .muscle-info-card {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 0.75rem;
            padding: 1.25rem;
            margin-bottom: 1rem;
            border-left: 4px solid #06b6d4;
        }
        
        .muscle-info-card h4 {
            color: #67e8f9;
            margin-bottom: 0.75rem;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .muscle-info-section {
            margin-top: 0.75rem;
        }
        
        .muscle-info-section h5 {
            color: #10b981;
            font-size: 0.95rem;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }
        
        .muscle-info-section p {
            color: rgba(255, 255, 255, 0.85);
            line-height: 1.6;
            margin-bottom: 0.5rem;
        }
        
        .muscle-info-section ul {
            list-style: none;
            padding-left: 0;
        }
        
        .muscle-info-section li {
            color: rgba(255, 255, 255, 0.85);
            padding: 0.3rem 0;
            padding-left: 1.5rem;
            position: relative;
            line-height: 1.5;
        }
        
        .muscle-info-section li:before {
            content: "‚Ä¢";
            position: absolute;
            left: 0.5rem;
            color: #06b6d4;
            font-weight: bold;
        }

        .rm-history-card {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 0.75rem;
            padding: 1rem;
            margin-bottom: 0.75rem;
            border: 1px solid rgba(255, 255, 255, 0.15);
        }

        .mobile-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }

        .mobile-table th,
        .mobile-table td {
            padding: 1rem;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .mobile-table th {
            background: rgba(6, 182, 212, 0.3);
            color: #67e8f9;
            font-weight: 600;
        }

        .mobile-table td {
            background: rgba(255, 255, 255, 0.05);
            color: rgba(255, 255, 255, 0.85);
        }

        .mobile-table tr:hover td {
            background: rgba(255, 255, 255, 0.1);
        }
    </style>
</head>
<body>
    <div id="app"></div>

    <script>exercicesPectoraux: [
                {
                    nom: "D√©velopp√© couch√© (halt√®res ou barre)",
                    description: "Exercice de base incontournable pour les pectoraux",
                    technique: [
                        "Allongez-vous sur le banc, pieds bien ancr√©s au sol",
                        "Barre : saisissez l√©g√®rement plus large que les √©paules",
                        "Halt√®res : positionnez-les au-dessus de la poitrine",
                        "Descendez la charge de mani√®re contr√¥l√©e jusqu'au bas des pectoraux",
                        "Poussez en contractant les pectoraux, coudes √† 45¬∞ du corps",
                        "Gardez les omoplates serr√©es et le dos l√©g√®rement cambr√©"
                    ],
                    variantes: ["Barre libre", "Halt√®res", "Barre guid√©e", "Prise serr√©e", "Prise large"]
                },
                {
                    nom: "D√©velopp√© inclin√© (halt√®res ou barre)",
                    description: "Cible le haut des pectoraux (faisceau claviculaire)",
                    technique: [
                        "R√©glez le banc √† 30-45¬∞ d'inclinaison",
                        "Position identique au d√©velopp√© couch√©",
                        "Descendez la charge vers le haut de la poitrine",
                        "Poussez en direction du plafond",
                        "Maintenez les omoplates serr√©es tout le long du mouvement",
                        "Ne cambrez pas excessivement le dos"
                    ],
                    variantes: ["Barre libre", "Halt√®res", "Inclinaison 30¬∞", "Inclinaison 45¬∞"]
                },
                {
                    nom: "√âcart√© couch√©",
                    description: "Excellent pour l'√©tirement et la congestion des pectoraux",
                    technique: [
                        "Allong√© sur un banc plat, halt√®res au-dessus de la poitrine",
                        "Bras tendus avec une l√©g√®re flexion permanente des coudes",
                        "√âcartez les bras en arc de cercle jusqu'√† sentir l'√©tirement",
                        "Descendez jusqu'√† ce que les halt√®res soient au niveau de la poitrine",
                        "Remontez en contractant fort les pectoraux",
                        "Ne verrouillez jamais compl√®tement les coudes"
                    ],
                    variantes: ["√âcart√© plat", "√âcart√© inclin√©", "√âcart√© d√©clin√©"]
                },
                {
                    nom: "Poulie vis-√†-vis",
                    description: "Travaille les pectoraux avec une tension constante",
                    technique: [
                        "Placez-vous debout entre deux poulies hautes",
                        "Saisissez les poign√©es, un pied l√©g√®rement devant l'autre",
                        "Penchez le buste l√©g√®rement en avant",
                        "Ramenez les mains devant vous en croisant l√©g√®rement",
                        "Gardez les coudes semi-fl√©chis tout au long du mouvement",
                        "Contractez fort les pectoraux en position maximale"
                    ],
                    variantes: ["Poulie haute (bas des pecs)", "Poulie basse (haut des pecs)", "Poulie m√©diane", "Unilat√©ral"]
                },
                {
                    nom: "Dips",
                    description: "Exercice au poids du corps tr√®s efficace pour pectoraux et triceps",
                    technique: [
                        "Saisissez les barres parall√®les, bras tendus",
                        "Penchez le buste en avant (environ 30¬∞) pour cibler les pectoraux",
                        "Descendez en fl√©chissant les coudes jusqu'√† 90¬∞ minimum",
                        "√âcartez l√©g√®rement les coudes vers l'ext√©rieur",
                        "Poussez fort pour remonter en contractant les pectoraux",
                        "Plus le buste est pench√©, plus les pectoraux travaillent"
                    ],
                    variantes: ["Poids du corps", "Lest√© (ceinture + poids)", "Assist√© (√©lastique)", "Barres parall√®les larges"]
                }
            ],
            exercicesDos: [
                {
                    nom: "Tirage vertical",
                    description: "Exercice de base pour d√©velopper la largeur du dos",
                    technique: [
                        "Assis √† la machine, genoux bloqu√©s sous les supports",
                        "Saisissez la barre en pronation (paumes vers l'avant), large",
                        "Tirez la barre vers le haut de la poitrine",
                        "Contractez les omoplates en les rapprochant",
                        "Gardez le buste l√©g√®rement en arri√®re (10-15¬∞)",
                        "Contr√¥lez la remont√©e, ne vous laissez pas tirer"
                    ],
                    variantes: ["Prise large pronation", "Prise serr√©e supination", "Prise neutre", "Unilat√©ral"]
                },
                {
                    nom: "Tirage horizontal",
                    description: "D√©veloppe l'√©paisseur du dos et les trap√®zes moyens",
                    technique: [
                        "Assis √† la machine, pieds sur les cales",
                        "Saisissez la poign√©e, bras tendus",
                        "Tirez vers le bas du sternum en gardant le buste droit",
                        "Serrez fort les omoplates en arri√®re",
                        "Gardez les coudes pr√®s du corps",
                        "Revenez en contr√¥lant, sentez l'√©tirement"
                    ],
                    variantes: ["Prise serr√©e", "Prise large", "Prise neutre", "Corde"]
                },
                {
                    nom: "Tractions",
                    description: "Le roi des exercices pour le dos au poids du corps",
                    technique: [
                        "Suspendez-vous √† une barre fixe",
                        "Pronation (paumes devant) pour largeur, supination (paumes vers soi) pour √©paisseur",
                        "Tirez jusqu'√† ce que le menton d√©passe la barre",
                        "Contractez fort les omoplates en haut du mouvement",
                        "Descendez de mani√®re contr√¥l√©e jusqu'√† extension compl√®te",
                        "√âvitez de vous balancer ou de donner des coups de jambes"
                    ],
                    variantes: ["Pronation large", "Supination serr√©e", "Prise neutre", "Lest√©", "Assist√©"]
                },
                {
                    nom: "Rowing barre",
                    description: "D√©veloppe l'√©paisseur du dos et la masse globale",
                    technique: [
                        "Penchez-vous en avant, dos droit, genoux l√©g√®rement fl√©chis",
                        "Saisissez la barre en pronation, mains √©cart√©es largeur √©paules",
                        "Tirez la barre vers le bas des abdominaux",
                        "Serrez les omoplates en haut du mouvement",
                        "Gardez les coudes pr√®s du corps",
                        "Maintenez le dos droit tout au long de l'exercice"
                    ],
                    variantes: ["Prise pronation", "Prise supination (Yates)", "Barre T", "Pench√© √† 45¬∞", "Pench√© √† 90¬∞"]
                },
                {
                    nom: "Rowing halt√®re",
                    description: "Travail unilat√©ral pour corriger les d√©s√©quilibres",
                    technique: [
                        "Un genou et une main en appui sur un banc",
                        "L'autre pied au sol, dos parall√®le au sol",
                        "Halt√®re dans la main libre, bras tendu",
                        "Tirez l'halt√®re vers la hanche en gardant le coude pr√®s du corps",
                        "Contractez l'omoplate en haut",
                        "Descendez en contr√¥lant jusqu'√† extension compl√®te"
                    ],
                    variantes: ["Un bras sur banc", "Deux bras pench√©", "Appui sur rack", "Rowing Kroc (lourd, explosif)"]
                },
                {
                    nom: "Oiseau buste pench√©",
                    description: "Isole l'arri√®re des √©paules et les trap√®zes inf√©rieurs",
                    technique: [
                        "Pench√© en avant √† 90¬∞, dos droit, genoux fl√©chis",
                        "Halt√®res sous la poitrine, bras l√©g√®rement fl√©chis",
                        "√âlevez les halt√®res sur les c√¥t√©s en arc de cercle",
                        "Montez jusqu'√† ce que les bras soient parall√®les au sol",
                        "Contractez fort entre les omoplates",
                        "Descendez lentement en contr√¥lant"
                    ],
                    variantes: ["Buste pench√© libre", "Appui front sur banc inclin√©", "Poulie basse", "Assis pench√©"]
                }
            ],
            exercicesEpaules: [
                {
                    nom: "D√©velopp√© militaire",
                    description: "Exercice de base pour les delto√Ødes",
                    technique: [
                        "Debout ou assis, barre devant les √©paules au niveau des clavicules",
                        "Prise l√©g√®rement plus large que les √©paules",
                        "Poussez verticalement au-dessus de la t√™te jusqu'√† extension compl√®te",
                        "Gardez les abdominaux gain√©s et le dos droit",
                        "Descendez de mani√®re contr√¥l√©e jusqu'aux clavicules",
                        "Ne cambrez pas excessivement le dos"
                    ],
                    variantes: ["Barre devant", "Barre nuque", "Halt√®res", "Debout", "Assis"]
                },
                {
                    nom: "√âl√©vations lat√©rales",
                    description: "Cible sp√©cifiquement les delto√Ødes moyens",
                    technique: [
                        "Debout, halt√®res le long du corps",
                        "Gardez une l√©g√®re flexion permanente des coudes",
                        "√âlevez les bras sur les c√¥t√©s jusqu'√† l'horizontale",
                        "Les pouces l√©g√®rement vers le bas en haut du mouvement",
                        "Contr√¥lez la descente, ne laissez pas tomber les halt√®res",
                        "√âvitez de monter les √©paules (trap√®zes)"
                    ],
                    variantes: ["Halt√®res", "Poulie basse", "Unilat√©ral", "Assis", "Buste pench√©"]
                },
                {
                    nom: "D√©velopp√© Arnold",
                    description: "Variante cr√©√©e par Arnold Schwarzenegger, travaille les 3 faisceaux",
                    technique: [
                        "Assis, halt√®res devant les √©paules, paumes vers soi (supination)",
                        "Commencez le mouvement en tournant les poignets vers l'ext√©rieur",
                        "Poussez en m√™me temps vers le haut en rotation",
                        "Terminez en pronation (paumes devant) bras tendus",
                        "Revenez en inversant le mouvement avec rotation",
                        "Le mouvement doit √™tre fluide et contr√¥l√©"
                    ],
                    variantes: ["Assis avec dossier", "Assis sans dossier", "Debout", "Rotation compl√®te vs partielle"]
                },
                {
                    nom: "√âl√©vations post√©rieures buste pench√©",
                    description: "Isole l'arri√®re des √©paules (delto√Ødes post√©rieurs)",
                    technique: [
                        "Pench√© en avant √† 90¬∞, dos droit",
                        "Halt√®res sous la poitrine, bras l√©g√®rement fl√©chis",
                        "√âlevez les halt√®res sur les c√¥t√©s et l√©g√®rement vers l'arri√®re",
                        "Montez jusqu'√† ce que les bras soient parall√®les au sol",
                        "Contractez l'arri√®re des √©paules en haut",
                        "Descendez lentement sans rel√¢cher la tension"
                    ],
                    variantes: ["Buste pench√© libre", "Appui front banc inclin√©", "Poulie vis-√†-vis invers√©", "Machine pec deck invers√©"]
                }
            ],
            exercicesBras: [
                {
                    nom: "Larry Scott (Curl pupitre)",
                    description: "Isole totalement les biceps, popularis√© par Larry Scott",
                    technique: [
                        "Assis ou debout, bras en appui sur le pupitre",
                        "Saisissez la barre en supination (paumes vers le haut)",
                        "Fl√©chissez les coudes en amenant la barre vers les √©paules",
                        "Gardez les bras bien plaqu√©s sur le pupitre",
                        "Contractez fort en haut du mouvement",
                        "Descendez lentement sans verrouiller compl√®tement les coudes"
                    ],
                    variantes: ["Barre EZ", "Barre droite", "Halt√®res unilat√©ral", "Pupitre vertical", "Pupitre inclin√©"]
                },
                {
                    nom: "Curl barre (poulie, barre ou halt√®re)",
                    description: "Exercice de base pour les biceps",
                    technique: [
                        "Debout, barre en supination, mains largeur √©paules",
                        "Coudes fixes le long du corps",
                        "Fl√©chissez les coudes en amenant la barre vers les √©paules",
                        "Contractez fort les biceps en haut",
                        "Descendez lentement en contr√¥lant",
                        "Ne bougez pas les √©paules ni le buste"
                    ],
                    variantes: ["Barre EZ", "Barre droite", "Halt√®res simultan√©s", "Halt√®res altern√©s", "Poulie basse", "Prise large", "Prise serr√©e"]
                },
                {
                    nom: "Curl marteau (corde ou halt√®re)",
                    description: "Cible les biceps et les brachioradiaux (avant-bras)",
                    technique: [
                        "Debout, halt√®res le long du corps en prise neutre (pouces vers le haut)",
                        "Coudes fixes le long du corps",
                        "Fl√©chissez les coudes en gardant la prise neutre",
                        "Montez jusqu'√† contraction maximale",
                        "Descendez lentement en contr√¥lant",
                        "Les pouces restent toujours vers le haut"
                    ],
                    variantes: ["Halt√®res simultan√©s", "Halt√®res altern√©s", "Corde √† la poulie", "Prise marteau sur banc inclin√©"]
                },
                {
                    nom: "Extension barre (poulie ou corde)",
                    description: "Exercice d'isolation pour les triceps",
                    technique: [
                        "Debout face √† une poulie haute",
                        "Saisissez la barre ou la corde, coudes fixes le long du corps",
                        "Poussez vers le bas jusqu'√† extension compl√®te des bras",
                        "Contractez fort les triceps en bas",
                        "Remontez en contr√¥lant sans bouger les coudes",
                        "Gardez le buste droit et les √©paules fixes"
                    ],
                    variantes: ["Barre droite", "Barre EZ", "Corde", "Prise pronation", "Prise supination", "Unilat√©ral"]
                },
                {
                    nom: "Barre au front",
                    description: "Excellent pour d√©velopper la masse des triceps",
                    technique: [
                        "Allong√© sur un banc, barre au-dessus du front",
                        "Prise serr√©e, coudes fixes pointant vers le plafond",
                        "Descendez la barre vers le front en fl√©chissant uniquement les coudes",
                        "Arr√™tez juste au-dessus du front",
                        "Remontez en contractant fort les triceps",
                        "Ne bougez surtout pas les coudes (ils restent fixes)"
                    ],
                    variantes: ["Barre EZ", "Barre droite", "Halt√®res", "Vers le front", "Vers le sommet du cr√¢ne", "Banc plat", "Banc d√©clin√©"]
                },
                {
                    nom: "Extension couch√© halt√®re",
                    description: "Travaille les trois chefs des triceps",
                    technique: [
                        "Allong√© sur un banc, halt√®re(s) au-dessus de la poitrine",
                        "Gardez les coudes fixes pointant vers le plafond",
                        "Descendez l'halt√®re sur le c√¥t√© de la t√™te en fl√©chissant les coudes",
                        "Sentez l'√©tirement des triceps en bas",
                        "Remontez en poussant jusqu'√† extension compl√®te",
                        "Mouvement lent et contr√¥l√©"
                    ],
                    variantes: ["Un halt√®re √† deux mains", "Deux halt√®res simultan√©s", "Unilat√©ral", "Banc plat", "Banc inclin√©"]
                }
            ],
            exercicesJambes: [
                {
                    nom: "Squat",
                    description: "Le roi des exercices pour les jambes",
                    technique: [
                        "Barre sur les trap√®zes (squat high) ou delto√Ødes post√©rieurs (squat low)",
                        "Pieds √©cart√©s largeur des √©paules, l√©g√®rement en canard",
                        "Descendez en poussant les fesses en arri√®re, dos droit",
                        "Allez au moins jusqu'√† la parall√®le (cuisses parall√®les au sol)",
                        "Gardez les genoux dans l'axe des pieds",
                        "Poussez fort en gardant les talons au sol"
                    ],
                    variantes: ["Squat barre haute", "Squat barre basse", "Squat avant (front squat)", "Goblet squat", "Squat bulgare", "Squat sumo"]
                },
                {
                    nom: "Soulev√© de terre",
                    description: "Exercice complet pour les jambes, fessiers et dos",
                    technique: [
                        "Pieds √©cart√©s largeur des hanches sous la barre",
                        "Saisissez la barre, dos droit, regard devant",
                        "Poussez fort avec les jambes en gardant la barre proche du corps",
                        "Tendez les hanches en serrant les fessiers en haut",
                        "Gardez les √©paules en arri√®re et la poitrine sortie",
                        "Descendez en contr√¥lant, m√™me chemin qu'√† la mont√©e"
                    ],
                    variantes: ["Soulev√© de terre classique", "Soulev√© de terre sumo", "Soulev√© de terre roumain", "Soulev√© de terre jambes tendues"]
                },
                {
                    nom: "Fentes",
                    description: "Excellent pour quadriceps, fessiers et √©quilibre",
                    technique: [
                        "Debout, faites un grand pas en avant",
                        "Descendez le genou arri√®re vers le sol",
                        "Le genou avant reste dans l'axe du pied et ne d√©passe pas les orteils",
                        "Le buste reste droit et vertical",
                        "Poussez sur le talon avant pour remonter",
                        "Alternez les jambes ou faites toutes les r√©p√©titions sur une jambe"
                    ],
                    variantes: ["Fentes avant", "Fentes arri√®re", "Fentes march√©es", "Fentes lat√©rales", "Fentes bulgares (pied arri√®re sur√©lev√©)", "Fentes saut√©es"]
                },
                {
                    nom: "Presse √† cuisses (inclin√©e)",
                    description: "Alternative au squat avec moins de contraintes sur le dos",
                    technique: [
                        "Assis ou allong√© dans la machine, dos bien plaqu√©",
                        "Pieds √©cart√©s largeur √©paules sur la plateforme",
                        "D√©bloquez la s√©curit√©, descendez en contr√¥lant",
                        "Allez jusqu'√† 90¬∞ de flexion des genoux (ou plus)",
                        "Poussez fort en gardant les talons bien ancr√©s",
                        "Ne verrouillez pas compl√®tement les genoux en haut"
                    ],
                    variantes: ["Pieds hauts (fessiers)", "Pieds bas (quadriceps)", "Pieds serr√©s", "Pieds larges", "Unilat√©ral"]
                },
                {
                    nom: "Leg curl",
                    description: "Isole les ischio-jambiers",
                    technique: [
                        "Allong√© sur la machine, genoux dans le vide",
                        "Chevilles sous le boudin, jambes tendues",
                        "Fl√©chissez les jambes en ramenant les talons vers les fessiers",
                        "Contractez fort les ischio-jambiers en haut",
                        "Descendez lentement en contr√¥lant",
                        "Ne cambrez pas le dos, gardez le bassin plaqu√©"
                    ],
                    variantes: ["Leg curl allong√©", "Leg curl assis", "Leg curl debout unilat√©ral"]
                },
                {
                    nom: "Leg extension",
                    description: "Isole les quadriceps",
                    technique: [
                        "Assis sur la machine, dos bien cal√©",
                        "Chevilles sous le boudin, genoux fl√©chis √† 90¬∞",
                        "Tendez les jambes jusqu'√† extension compl√®te",
                        "Contractez fort les quadriceps en haut",
                        "Descendez lentement en contr√¥lant",
                        "Ne bloquez pas brutalement les genoux en extension"
                    ],
                    variantes: ["Deux jambes simultan√©es", "Unilat√©ral", "Pieds en rotation externe", "Pieds en rotation interne"]
                },
                {
                    nom: "Adducteurs / Abducteurs machine",
                    description: "Renforce les muscles de l'int√©rieur et l'ext√©rieur des cuisses",
                    technique: [
                        "Assis sur la machine, dos bien cal√©",
                        "ADDUCTEURS : √âcartez les jambes puis refermez en contractant l'int√©rieur des cuisses",
                        "ABDUCTEURS : Jambes serr√©es puis √©cartez en contractant l'ext√©rieur des cuisses",
                        "Mouvement lent et contr√¥l√©",
                        "Maintenez la contraction 1 seconde en position maximale",
                        "Important pour la stabilit√© du genou et du bassin"
                    ],
                    variantes: ["Adducteurs machine", "Abducteurs machine", "Adducteurs √† la poulie", "√âl√©vations lat√©rales jambe au sol"]
                }
            ],class LivretApp {
            constructor() {
                this.currentUser = null;
                this.currentView = 'login';
                this.currentTab = 'dashboard';
                this.sessions = [];
                this.rmHistory = [];
                this.currentSession = null;
                this.musclesList = ['Pectoraux', 'Grand dorsal', 'Trap√®zes', 'Delto√Ødes', 'Biceps', 'Triceps', 'Abdominaux', 'Quadriceps', 'Ischio-jambiers', 'Fessiers', 'Mollets'];
                this.currentCoursTab = 'principes';
                this.init();
            }

            init() {
                this.loadSessions();
                this.loadRMHistory();
                this.render();
            }

            loadSessions() {
                if (!this.currentUser) return;
                const result = storage.get('sessions');
                if (result.exists) {
                    this.sessions = JSON.parse(result.value);
                }
            }

            saveSessions() {
                storage.save('sessions', this.sessions);
            }

            loadRMHistory() {
                if (!this.currentUser) return;
                const result = storage.get('rmHistory');
                if (result.exists) {
                    this.rmHistory = JSON.parse(result.value);
                }
            }

            saveRMHistory() {
                storage.save('rmHistory', this.rmHistory);
            }

            render() {
                const app = document.getElementById('app');
                
                if (this.currentView === 'login') {
                    app.innerHTML = this.renderLogin();
                    this.attachLoginEvents();
                } else if (this.currentView === 'signup') {
                    app.innerHTML = this.renderSignup();
                    this.attachLoginEvents();
                } else if (this.currentView === 'reset') {
                    app.innerHTML = this.renderPasswordReset();
                    this.attachResetEvents();
                } else if (this.currentView === 'dashboard') {
                    app.innerHTML = this.renderDashboard();
                    this.attachDashboardEvents();
                } else if (this.currentView === 'session-form') {
                    app.innerHTML = this.renderSessionForm();
                    this.attachSessionFormEvents();
                } else if (this.currentView === 'session-detail') {
                    app.innerHTML = this.renderSessionDetail();
                }
            }

            renderLogin() {
                return `
                    <div class="container">
                        <div class="card" style="max-width: 450px; margin: 4rem auto;">
                            <div class="text-center mb-4">
                                <div class="lock-icon" style="margin: 0 auto 1.5rem;">üîí</div>
                                <h1 class="text-white" style="font-size: 2rem; margin-bottom: 0.5rem;">Livret Musculation</h1>
                                <p class="text-cyan">CAP - Suivi personnalis√©</p>
                            </div>
                            
                            <form id="login-form">
                                <div class="mb-2">
                                    <label class="text-white mb-1" style="display: block;">Nom d'utilisateur</label>
                                    <input type="text" class="input" id="login-username" required>
                                </div>
                                
                                <div class="mb-4">
                                    <label class="text-white mb-1" style="display: block;">Mot de passe</label>
                                    <input type="password" class="input" id="login-password" required>
                                </div>
                                
                                <button type="submit" class="btn btn-primary" style="width: 100%; margin-bottom: 1rem;">Se connecter</button>
                                
                                <div class="text-center">
                                    <button type="button" class="btn btn-link" onclick="app.showSignup()">Cr√©er un compte</button>
                                    <button type="button" class="btn btn-link" onclick="app.showPasswordReset()">Mot de passe oubli√© ?</button>
                                </div>
                            </form>
                        </div>
                    </div>
                `;
            }

            renderSignup() {
                return `
                    <div class="container">
                        <div class="card" style="max-width: 450px; margin: 4rem auto;">
                            <div class="text-center mb-4">
                                <h1 class="text-white" style="font-size: 2rem; margin-bottom: 0.5rem;">Cr√©er un compte</h1>
                                <p class="text-cyan">Rejoignez le programme CAP</p>
                            </div>
                            
                            <form id="signup-form">
                                <div class="mb-2">
                                    <label class="text-white mb-1" style="display: block;">Nom d'utilisateur</label>
                                    <input type="text" class="input" id="signup-username" required>
                                </div>
                                
                                <div class="mb-2">
                                    <label class="text-white mb-1" style="display: block;">Mot de passe</label>
                                    <input type="password" class="input" id="signup-password" required>
                                </div>
                                
                                <div class="mb-2">
                                    <label class="text-white mb-1" style="display: block;">Confirmer le mot de passe</label>
                                    <input type="password" class="input" id="signup-password-confirm" required>
                                </div>
                                
                                <div class="mb-2">
                                    <label class="text-white mb-1" style="display: block;">Question de s√©curit√©</label>
                                    <select class="input" id="signup-security-question" required>
                                        <option value="">Choisissez une question...</option>
                                        ${securityQuestions.map((q, i) => `<option value="${i}">${q}</option>`).join('')}
                                    </select>
                                </div>
                                
                                <div class="mb-4">
                                    <label class="text-white mb-1" style="display: block;">R√©ponse</label>
                                    <input type="text" class="input" id="signup-security-answer" required>
                                </div>
                                
                                <button type="submit" class="btn btn-success" style="width: 100%; margin-bottom: 1rem;">S'inscrire</button>
                                
                                <div class="text-center">
                                    <button type="button" class="btn btn-link" onclick="app.showLogin()">Retour √† la connexion</button>
                                </div>
                            </form>
                        </div>
                    </div>
                `;
            }

            renderPasswordReset() {
                return `
                    <div class="container">
                        <div class="card" style="max-width: 450px; margin: 4rem auto;">
                            <div class="text-center mb-4">
                                <h1 class="text-white" style="font-size: 2rem; margin-bottom: 0.5rem;">R√©initialiser le mot de passe</h1>
                                <p class="text-cyan">R√©cup√©rez l'acc√®s √† votre compte</p>
                            </div>
                            
                            <form id="reset-form">
                                <div class="mb-2">
                                    <label class="text-white mb-1" style="display: block;">Nom d'utilisateur</label>
                                    <input type="text" class="input" id="reset-username" required>
                                </div>
                                
                                <div id="question-container" style="display: none;">
                                    <div class="mb-2">
                                        <label class="text-white mb-1" style="display: block;" id="question-label"></label>
                                        <input type="text" class="input" id="reset-security-answer" required>
                                    </div>
                                </div>
                                
                                <div id="password-container" style="display: none;">
                                    <div class="mb-2">
                                        <label class="text-white mb-1" style="display: block;">Nouveau mot de passe</label>
                                        <input type="password" class="input" id="reset-new-password" required>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label class="text-white mb-1" style="display: block;">Confirmer le mot de passe</label>
                                        <input type="password" class="input" id="reset-password-confirm" required>
                                    </div>
                                </div>
                                
                                <button type="submit" class="btn btn-warning" style="width: 100%; margin-bottom: 1rem;">R√©initialiser</button>
                                
                                <div class="text-center">
                                    <button type="button" class="btn btn-link" onclick="app.showLogin()">Retour √† la connexion</button>
                                </div>
                            </form>
                        </div>
                    </div>
                `;
            }

            renderDashboard() {
                return `
                    <div class="container">
                        <div class="card">
                            <div class="flex justify-between items-center mb-4">
                                <h1 class="text-white" style="font-size: 2rem;">Bienvenue, ${this.currentUser} üí™</h1>
                                <div class="flex gap-2">
                                    <button class="btn btn-warning" onclick="app.exportData()">üíæ Exporter</button>
                                    <button class="btn btn-warning" onclick="app.importData()">üì• Importer</button>
                                    <button class="btn btn-secondary" onclick="app.logout()">D√©connexion</button>
                                </div>
                            </div>

                            <div class="flex gap-2 mb-4" style="overflow-x: auto;">
                                <button class="tab-btn ${this.currentTab === 'dashboard' ? 'active' : ''}" onclick="app.switchTab('dashboard')">üìä Dashboard</button>
                                <button class="tab-btn ${this.currentTab === 'rm' ? 'active' : ''}" onclick="app.switchTab('rm')">üéØ Calculateur 1RM</button>
                                <button class="tab-btn ${this.currentTab === 'sessions' ? 'active' : ''}" onclick="app.switchTab('sessions')">üìù Mes S√©ances</button>
                                <button class="tab-btn ${this.currentTab === 'cours' ? 'active' : ''}" onclick="app.switchTab('cours')">üìö Cours & Ressources</button>
                            </div>

                            ${this.currentTab === 'dashboard' ? this.renderDashboardTab() : ''}
                            ${this.currentTab === 'rm' ? this.renderRMTab() : ''}
                            ${this.currentTab === 'sessions' ? this.renderSessionsTab() : ''}
                            ${this.currentTab === 'cours' ? this.renderCoursTab() : ''}
                        </div>
                    </div>
                `;
            }

            renderDashboardTab() {
                const stats = {
                    total: this.sessions.length,
                    force: this.sessions.filter(s => s.type === 'Force').length,
                    endurance: this.sessions.filter(s => s.type === 'Endurance').length,
                    equilibre: this.sessions.filter(s => s.type === '√âquilibre').length
                };

                return `
                    <div class="grid grid-cols-2 gap-3 mb-4">
                        <div style="background: linear-gradient(135deg, rgba(6, 182, 212, 0.2) 0%, rgba(59, 130, 246, 0.2) 100%); border-radius: 1rem; padding: 1.5rem; border: 1px solid rgba(6, 182, 212, 0.3);">
                            <div class="text-cyan" style="font-size: 2.5rem; font-weight: bold;">${stats.total}</div>
                            <div class="text-white" style="opacity: 0.9;">S√©ances cr√©√©es</div>
                        </div>
                        <div style="background: linear-gradient(135deg, rgba(249, 115, 22, 0.2) 0%, rgba(251, 146, 60, 0.2) 100%); border-radius: 1rem; padding: 1.5rem; border: 1px solid rgba(249, 115, 22, 0.3);">
                            <div style="color: #fb923c; font-size: 2.5rem; font-weight: bold;">${stats.force}</div>
                            <div class="text-white" style="opacity: 0.9;">Force</div>
                        </div>
                        <div style="background: linear-gradient(135deg, rgba(6, 182, 212, 0.2) 0%, rgba(59, 130, 246, 0.2) 100%); border-radius: 1rem; padding: 1.5rem; border: 1px solid rgba(6, 182, 212, 0.3);">
                            <div class="text-cyan" style="font-size: 2.5rem; font-weight: bold;">${stats.endurance}</div>
                            <div class="text-white" style="opacity: 0.9;">Endurance</div>
                        </div>
                        <div style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.2) 0%, rgba(20, 184, 166, 0.2) 100%); border-radius: 1rem; padding: 1.5rem; border: 1px solid rgba(16, 185, 129, 0.3);">
                            <div style="color: #14b8a6; font-size: 2.5rem; font-weight: bold;">${stats.equilibre}</div>
                            <div class="text-white" style="opacity: 0.9;">√âquilibre</div>
                        </div>
                    </div>

                    <div class="tip-box">
                        <div class="text-white" style="font-weight: 600; margin-bottom: 0.5rem;">üí° Conseil du jour</div>
                        <div class="text-white" style="opacity: 0.9;">N'oubliez pas de bien vous √©chauffer avant chaque s√©ance et de vous √©tirer apr√®s. La r√©cup√©ration est aussi importante que l'entra√Ænement !</div>
                    </div>
                `;
            }

            renderRMTab() {
                return `
                    <div>
                        <h2 class="text-white mb-2" style="font-size: 1.5rem;">Calculateur de 1RM</h2>
                        <p class="text-white mb-4" style="opacity: 0.8;">Calculez votre charge maximale sur une r√©p√©tition</p>

                        <form id="rm-form" class="mb-4">
                            <div class="mb-2">
                                <label class="text-white mb-1" style="display: block;">Nom de l'exercice</label>
                                <input type="text" class="input" id="rm-exercise" placeholder="Ex: D√©velopp√© couch√©" required>
                            </div>
                            
                            <div class="grid grid-cols-2 gap-3 mb-2">
                                <div>
                                    <label class="text-white mb-1" style="display: block;">Charge soulev√©e (kg)</label>
                                    <input type="number" class="input" id="rm-weight" step="0.5" required>
                                </div>
                                <div>
                                    <label class="text-white mb-1" style="display: block;">Nombre de r√©p√©titions</label>
                                    <input type="number" class="input" id="rm-reps" min="1" max="12" required>
                                </div>
                            </div>

                            <div class="mb-4">
                                <label class="text-white mb-1" style="display: block;">Date du test</label>
                                <input type="date" class="input" id="rm-date" required>
                            </div>

                            <button type="submit" class="btn btn-primary">Calculer et enregistrer</button>
                        </form>

                        <div id="rm-result" class="hidden"></div>

                        ${this.rmHistory.length > 0 ? `
                            <div class="mt-4">
                                <h3 class="text-cyan mb-3" style="font-size: 1.3rem;">üìä Historique des tests</h3>
                                ${this.rmHistory.slice().reverse().map((test, index) => `
                                    <div class="rm-history-card">
                                        <div class="flex justify-between items-center">
                                            <div>
                                                <h4 class="text-cyan" style="font-size: 1.1rem; margin-bottom: 0.5rem;">${test.exercise}</h4>
                                                <p class="text-white" style="opacity: 0.7; font-size: 0.9rem;">üìÖ ${test.date}</p>
                                            </div>
                                            <div class="text-center">
                                                <div style="color: #10b981; font-size: 1.8rem; font-weight: bold;">${test.rm} kg</div>
                                                <div class="text-white" style="opacity: 0.7; font-size: 0.85rem;">1RM estim√©</div>
                                            </div>
                                        </div>
                                        <div class="text-white mt-2" style="opacity: 0.7; font-size: 0.9rem;">
                                            Bas√© sur ${test.weight}kg √ó ${test.reps} r√©p√©tition${test.reps > 1 ? 's' : ''}
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        ` : ''}

                        <div class="tip-box">
                            <div class="text-white" style="font-weight: 600; margin-bottom: 0.5rem;">‚ÑπÔ∏è Comment utiliser ce calculateur ?</div>
                            <ul style="list-style: none; padding: 0;">
                                <li class="text-white" style="opacity: 0.9; padding: 0.25rem 0;">‚Ä¢ Entrez une charge que vous pouvez soulever entre 1 et 12 fois</li>
                                <li class="text-white" style="opacity: 0.9; padding: 0.25rem 0;">‚Ä¢ Le calculateur estimera votre 1RM (charge maximale)</li>
                                <li class="text-white" style="opacity: 0.9; padding: 0.25rem 0;">‚Ä¢ Plus pr√©cis entre 3-8 r√©p√©titions</li>
                                <li class="text-white" style="opacity: 0.9; padding: 0.25rem 0;">‚Ä¢ Tous vos tests sont sauvegard√©s dans l'historique</li>
                            </ul>
                        </div>
                    </div>
                `;
            }

            renderSessionsTab() {
                return `
                    <div>
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-white" style="font-size: 1.5rem;">Mes S√©ances d'entra√Ænement</h2>
                            <button class="btn btn-primary" onclick="app.createNewSession()">‚ûï Nouvelle s√©ance</button>
                        </div>

                        ${this.sessions.length === 0 ? `
                            <div class="text-center" style="padding: 3rem 1rem;">
                                <div style="font-size: 4rem; margin-bottom: 1rem;">üìù</div>
                                <p class="text-white" style="font-size: 1.2rem; margin-bottom: 0.5rem;">Aucune s√©ance cr√©√©e</p>
                                <p class="text-white" style="opacity: 0.7;">Commencez par cr√©er votre premi√®re s√©ance d'entra√Ænement</p>
                            </div>
                        ` : `
                            <div>
                                ${this.sessions.map((session, index) => `
                                    <div class="session-card" onclick="app.viewSession(${index})">
                                        <div class="flex justify-between items-center mb-2">
                                            <h3 class="text-white" style="font-size: 1.2rem;">${session.nom}</h3>
                                            <span class="badge badge-${session.type.toLowerCase()}">${session.type}</span>
                                        </div>
                                        <div class="flex gap-2 mb-2" style="flex-wrap: wrap;">
                                            ${session.muscles.map(m => `<span class="badge" style="background: rgba(6, 182, 212, 0.3); color: #67e8f9;">${m}</span>`).join('')}
                                        </div>
                                        <p class="text-white" style="opacity: 0.7; font-size: 0.9rem;">${session.exercices.length} exercice(s)</p>
                                    </div>
                                `).join('')}
                            </div>
                        `}
                    </div>
                `;
            }

            renderCoursTab() {
                return `
                    <div>
                        <h2 class="text-white mb-4" style="font-size: 1.5rem;">üìö Cours & Ressources P√©dagogiques</h2>
                        
                        <div class="flex gap-2 mb-4" style="overflow-x: auto; padding-bottom: 0.5rem;">
                            <button class="sub-tab-btn ${this.currentCoursTab === 'principes' ? 'active' : ''}" onclick="app.switchCoursTab('principes')">üí° Principes</button>
                            <button class="sub-tab-btn ${this.currentCoursTab === 'mobiles' ? 'active' : ''}" onclick="app.switchCoursTab('mobiles')">üéØ 3 Mobiles</button>
                            <button class="sub-tab-btn ${this.currentCoursTab === 'hygiene' ? 'active' : ''}" onclick="app.switchCoursTab('hygiene')">üßò Hygi√®ne de vie</button>
                            <button class="sub-tab-btn ${this.currentCoursTab === 'pectoraux' ? 'active' : ''}" onclick="app.switchCoursTab('pectoraux')">üí™ Pectoraux</button>
                            <button class="sub-tab-btn ${this.currentCoursTab === 'dos' ? 'active' : ''}" onclick="app.switchCoursTab('dos')">üî∫ Dos</button>
                            <button class="sub-tab-btn ${this.currentCoursTab === 'epaules' ? 'active' : ''}" onclick="app.switchCoursTab('epaules')">üèîÔ∏è √âpaules</button>
                            <button class="sub-tab-btn ${this.currentCoursTab === 'bras' ? 'active' : ''}" onclick="app.switchCoursTab('bras')">üí™ Bras</button>
                            <button class="sub-tab-btn ${this.currentCoursTab === 'jambes' ? 'active' : ''}" onclick="app.switchCoursTab('jambes')">ü¶µ Jambes</button>
                            <button class="sub-tab-btn ${this.currentCoursTab === 'anatomie' ? 'active' : ''}" onclick="app.switchCoursTab('anatomie')">üß¨ Planches Anatomiques</button>
                        </div>

                        ${this.renderCoursContent()}
                    </div>
                `;
            }

            renderCoursContent() {
                if (this.currentCoursTab === 'principes') {
                    return `
                        <div class="content-section">
                            <h3 class="text-cyan mb-4" style="font-size: 1.3rem;">Les Principes Fondamentaux de la Musculation</h3>
                            
                            ${coursData.principes.map(principe => `
                                <div class="exercise-card">
                                    <h4>${principe.titre}</h4>
                                    <p class="text-white" style="opacity: 0.9; margin-bottom: 1rem; line-height: 1.6;">${principe.contenu}</p>
                                    <div class="tip-box" style="margin-top: 1rem;">
                                        <div class="text-white" style="font-weight: 600; margin-bottom: 0.5rem;">‚ú® Conseils pratiques :</div>
                                        <ul>
                                            ${principe.conseils.map(conseil => `<li>${conseil}</li>`).join('')}
                                        </ul>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    `;
                } else if (this.currentCoursTab === 'mobiles') {
                    return this.renderMobilesSection();
                } else if (this.currentCoursTab === 'hygiene') {
                    return this.renderHygieneSection();
                } else if (this.currentCoursTab === 'pectoraux') {
                    return this.renderExercicesSection(coursData.exercicesPectoraux, 'Pectoraux');
                } else if (this.currentCoursTab === 'dos') {
                    return this.renderExercicesSection(coursData.exercicesDos, 'Dos');
                } else if (this.currentCoursTab === 'epaules') {
                    return this.renderExercicesSection(coursData.exercicesEpaules, '√âpaules');
                } else if (this.currentCoursTab === 'bras') {
                    return this.renderExercicesSection(coursData.exercicesBras, 'Bras');
                } else if (this.currentCoursTab === 'jambes') {
                    return this.renderExercicesSection(coursData.exercicesJambes, 'Jambes');
                } else if (this.currentCoursTab === 'anatomie') {
                    return this.renderAnatomieSection();
                }
            }

            renderMobilesSection() {
                return `
                    <div class="content-section">
                        <h3 class="text-cyan mb-4" style="font-size: 1.3rem;">üéØ Les 3 Mobiles en Musculation (CA5 - AFLP)</h3>
                        
                        <p class="text-white mb-4" style="opacity: 0.9; line-height: 1.6;">
                            En musculation, on distingue 3 mobiles principaux correspondant √† 3 objectifs diff√©rents. 
                            Chaque mobile n√©cessite des param√®tres d'entra√Ænement sp√©cifiques (charge, r√©p√©titions, s√©ries, repos).
                        </p>

                        <table class="mobile-table">
                            <thead>
                                <tr>
                                    <th>MOBILE</th>
                                    <th>OBJECTIF</th>
                                    <th>CHARGE (% CM)</th>
                                    <th>R√âP√âTITIONS</th>
                                    <th>S√âRIES</th>
                                    <th>REPOS</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${coursData.mobiles.map(mobile => `
                                    <tr>
                                        <td style="font-weight: 600; color: ${mobile.color};">${mobile.nom}</td>
                                        <td>${mobile.objectif}</td>
                                        <td>${mobile.charge}</td>
                                        <td>${mobile.repetitions}</td>
                                        <td>${mobile.series}</td>
                                        <td>${mobile.repos}</td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>

                        <div class="tip-box" style="margin-top: 2rem;">
                            <div class="text-white" style="font-weight: 600; margin-bottom: 0.5rem;">üí° Comment choisir son mobile ?</div>
                            <ul style="list-style: none; padding: 0;">
                                <li class="text-white" style="opacity: 0.9; padding: 0.3rem 0;">‚Ä¢ <strong>FORCE</strong> : Pour devenir plus fort, soulever plus lourd (athl√©tisme, powerlifting)</li>
                                <li class="text-white" style="opacity: 0.9; padding: 0.3rem 0;">‚Ä¢ <strong>√âQUILIBRE/VOLUME</strong> : Pour d√©velopper la masse musculaire (bodybuilding)</li>
                                <li class="text-white" style="opacity: 0.9; padding: 0.3rem 0;">‚Ä¢ <strong>ENDURANCE</strong> : Pour tenir plus longtemps, am√©liorer la r√©sistance musculaire (sports d'endurance)</li>
                            </ul>
                        </div>

                        <div class="warning-box" style="margin-top: 1rem;">
                            <div class="text-white" style="font-weight: 600; margin-bottom: 0.5rem;">‚ö†Ô∏è CM = Charge Maximale (1RM)</div>
                            <p class="text-white" style="opacity: 0.9;">
                                La CM repr√©sente la charge maximale que vous pouvez soulever une seule fois sur un exercice donn√©. 
                                Utilisez le calculateur 1RM pour estimer votre CM avant de d√©finir vos charges d'entra√Ænement.
                            </p>
                        </div>
                    </div>
                `;
            }

            renderHygieneSection() {
                return `
                    <div class="content-section">
                        <h3 class="text-cyan mb-4" style="font-size: 1.3rem;">üßò Hygi√®ne de Vie en Musculation</h3>
                        
                        <h4 class="text-cyan mb-3" style="font-size: 1.1rem;">‚úÖ AVANT la s√©ance</h4>
                        ${coursData.hygiene.avant.map(item => `
                            <div class="exercise-card">
                                <h4>${item.titre}</h4>
                                <p class="text-white" style="opacity: 0.9; line-height: 1.6;">${item.contenu}</p>
                            </div>
                        `).join('')}

                        <h4 class="text-cyan mb-3 mt-4" style="font-size: 1.1rem;">üí™ PENDANT la s√©ance</h4>
                        ${coursData.hygiene.pendant.map(item => `
                            <div class="exercise-card">
                                <h4>${item.titre}</h4>
                                <p class="text-white" style="opacity: 0.9; line-height: 1.6;">${item.contenu}</p>
                            </div>
                        `).join('')}

                        <h4 class="text-cyan mb-3 mt-4" style="font-size: 1.1rem;">üîÑ APR√àS la s√©ance</h4>
                        ${coursData.hygiene.apres.map(item => `
                            <div class="exercise-card">
                                <h4>${item.titre}</h4>
                                <p class="text-white" style="opacity: 0.9; line-height: 1.6;">${item.contenu}</p>
                            </div>
                        `).join('')}

                        <div class="tip-box" style="margin-top: 2rem;">
                            <div class="text-white" style="font-weight: 600; margin-bottom: 0.5rem;">‚≠ê L'essentiel √† retenir</div>
                            <ul style="list-style: none; padding: 0;">
                                <li class="text-white" style="opacity: 0.9; padding: 0.3rem 0;">‚Ä¢ L'hydratation est cruciale : buvez AVANT, PENDANT et APR√àS</li>
                                <li class="text-white" style="opacity: 0.9; padding: 0.3rem 0;">‚Ä¢ √âchauffement et √©tirements ne sont PAS optionnels</li>
                                <li class="text-white" style="opacity: 0.9; padding: 0.3rem 0;">‚Ä¢ La r√©cup√©ration (repos + nutrition) est aussi importante que l'entra√Ænement</li>
                                <li class="text-white" style="opacity: 0.9; padding: 0.3rem 0;">‚Ä¢ Le sommeil est votre meilleur alli√© pour progresser</li>
                            </ul>
                        </div>
                    </div>
                `;
            }

            renderExercicesSection(exercices, titre) {
                return `
                    <div class="content-section">
                        <h3 class="text-cyan mb-4" style="font-size: 1.3rem;">Exercices pour les ${titre}</h3>
                        
                        ${exercices.map(ex => `
                            <div class="exercise-card">
                                <h4>${ex.nom}</h4>
                                <p class="text-white" style="opacity: 0.9; margin-bottom: 1rem; font-style: italic;">${ex.description}</p>
                                
                                <div style="margin-bottom: 1rem;">
                                    <div class="text-white" style="font-weight: 600; margin-bottom: 0.5rem; color: #10b981;">üéØ Technique d'ex√©cution :</div>
                                    <ul>
                                        ${ex.technique.map(step => `<li>${step}</li>`).join('')}
                                    </ul>
                                </div>
                                
                                ${ex.variantes ? `
                                    <div class="tip-box">
                                        <div class="text-white" style="font-weight: 600; margin-bottom: 0.5rem;">üîÑ Variantes :</div>
                                        <p class="text-white" style="opacity: 0.9;">${ex.variantes.join(' ‚Ä¢ ')}</p>
                                    </div>
                                ` : ''}
                            </div>
                        `).join('')}
                    </div>
                `;
            }

            renderAnatomieSection() {
                return `
                    <div class="content-section">
                        <h3 class="text-cyan mb-4" style="font-size: 1.3rem;">üß¨ Planches Anatomiques</h3>
                        
                        <div class="grid grid-cols-2 gap-3 mb-4">
                            <div class="anatomy-image-container">
                                <img src="https://github.com/BastianMAS/livret-musculation-cap/blob/main/images/planche%20anatomique%20dos.PNG?raw=true" alt="Planche anatomique dos">
                                <p class="text-white" style="font-size: 0.9rem; opacity: 0.8; margin-top: 0.5rem;">Vue de dos</p>
                            </div>
                            
                            <div class="anatomy-image-container">
                                <img src="https://github.com/BastianMAS/livret-musculation-cap/blob/main/images/planche%20anatomique%20face.PNG?raw=true" alt="Planche anatomique face">
                                <p class="text-white" style="font-size: 0.9rem; opacity: 0.8; margin-top: 0.5rem;">Vue de face</p>
                            </div>
                        </div>

                        <h3 class="text-cyan mb-3" style="font-size: 1.2rem; margin-top: 2rem;">üìñ Anatomie Musculaire D√©taill√©e</h3>
                        
                        ${this.musclesList.map(muscle => {
                            const info = coursData.anatomie[muscle];
                            return `
                                <div class="muscle-info-card">
                                    <h4>üí™ ${muscle}</h4>
                                    
                                    <div class="muscle-info-section">
                                        <h5>üéØ R√¥le et fonction</h5>
                                        <p>${info.role}</p>
                                    </div>
                                    
                                    <div class="muscle-info-section">
                                        <h5>üîó Insertions anatomiques</h5>
                                        <ul>
                                            ${info.insertions.map(insertion => `<li>${insertion}</li>`).join('')}
                                        </ul>
                                    </div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                `;
            }

            switchCoursTab(tab) {
                this.currentCoursTab = tab;
                this.render();
            }renderSessionForm() {
                return `
                    <div class="container">
                        <div class="card">
                            <div class="flex justify-between items-center mb-4">
                                <h1 class="text-white" style="font-size: 2rem;">‚ûï Nouvelle S√©ance</h1>
                                <button class="btn btn-secondary" onclick="app.cancelSession()">‚Üê Retour</button>
                            </div>

                            <div class="mb-4">
                                <label class="text-white mb-1" style="display: block;">Nom de la s√©ance</label>
                                <input type="text" class="input" id="session-name" placeholder="Ex: Pectoraux + Triceps">
                            </div>

                            <div class="mb-4">
                                <label class="text-white mb-1" style="display: block;">Type de s√©ance</label>
                                <select class="input" id="session-type">
                                    <option value="Force">Force</option>
                                    <option value="Endurance">Endurance</option>
                                    <option value="√âquilibre">√âquilibre</option>
                                </select>
                            </div>

                            <div class="mb-4">
                                <label class="text-white mb-2" style="display: block;">Muscles cibl√©s</label>
                                <div class="grid grid-cols-3 gap-2" id="muscles-list"></div>
                            </div>

                            <div class="mb-4">
                                <div class="flex justify-between items-center mb-2">
                                    <label class="text-white" style="display: block;">Exercices</label>
                                    <button class="btn btn-primary" onclick="app.addExercice()">‚ûï Ajouter</button>
                                </div>
                                <div id="exercices-list"></div>
                            </div>

                            <div class="flex gap-2">
                                <button class="btn btn-success" onclick="app.saveSession()" style="flex: 1;">üíæ Enregistrer</button>
                            </div>
                        </div>
                    </div>
                `;
            }

            renderSessionDetail() {
                const session = this.sessions[this.currentSession];
                return `
                    <div class="container">
                        <div class="card">
                            <div class="flex justify-between items-center mb-4">
                                <div>
                                    <h1 class="text-white mb-2" style="font-size: 2rem;">${session.nom}</h1>
                                    <span class="badge badge-${session.type.toLowerCase()}">${session.type}</span>
                                </div>
                                <button class="btn btn-secondary" onclick="app.backToSessions()">‚Üê Retour</button>
                            </div>

                            <div class="mb-4">
                                <h3 class="text-cyan mb-2">Muscles cibl√©s</h3>
                                <div class="flex gap-2" style="flex-wrap: wrap;">
                                    ${session.muscles.map(m => `<span class="badge" style="background: rgba(6, 182, 212, 0.3); color: #67e8f9;">${m}</span>`).join('')}
                                </div>
                            </div>

                            <div class="mb-4">
                                <h3 class="text-cyan mb-2">Exercices (${session.exercices.length})</h3>
                                ${session.exercices.map((ex, i) => `
                                    <div style="background: rgba(255, 255, 255, 0.1); border-radius: 0.75rem; padding: 1.25rem; margin-bottom: 0.75rem; border: 1px solid rgba(255, 255, 255, 0.2);">
                                        <div class="flex justify-between items-center mb-2">
                                            <h4 class="text-white" style="font-size: 1.1rem;">${i + 1}. ${ex.nom}</h4>
                                        </div>
                                        <div class="grid grid-cols-3 gap-3">
                                            <div>
                                                <div class="text-cyan" style="font-size: 0.85rem;">S√©ries</div>
                                                <div class="text-white" style="font-size: 1.2rem; font-weight: 600;">${ex.series}</div>
                                            </div>
                                            <div>
                                                <div class="text-cyan" style="font-size: 0.85rem;">R√©p√©titions</div>
                                                <div class="text-white" style="font-size: 1.2rem; font-weight: 600;">${ex.repetitions}</div>
                                            </div>
                                            <div>
                                                <div class="text-cyan" style="font-size: 0.85rem;">Charge</div>
                                                <div class="text-white" style="font-size: 1.2rem; font-weight: 600;">${ex.charge}</div>
                                            </div>
                                        </div>
                                        ${ex.repos ? `<div class="text-white mt-2" style="opacity: 0.8; font-size: 0.9rem;">‚è±Ô∏è Repos : ${ex.repos}</div>` : ''}
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                `;
            }

            handleLogin(e) {
                e.preventDefault();
                const username = document.getElementById('login-username').value;
                const password = document.getElementById('login-password').value;

                const userKey = `user-${username}`;
                const userResult = storage.get(userKey, true);

                if (!userResult.exists) {
                    alert('Nom d\'utilisateur incorrect');
                    return;
                }

                const userData = JSON.parse(userResult.value);
                if (userData.password !== password) {
                    alert('Mot de passe incorrect');
                    return;
                }

                this.currentUser = username;
                this.currentView = 'dashboard';
                this.loadSessions();
                this.loadRMHistory();
                this.render();
            }

            handleSignup(e) {
                e.preventDefault();
                const username = document.getElementById('signup-username').value;
                const password = document.getElementById('signup-password').value;
                const passwordConfirm = document.getElementById('signup-password-confirm').value;
                const securityQuestion = document.getElementById('signup-security-question').value;
                const securityAnswer = document.getElementById('signup-security-answer').value;

                if (password !== passwordConfirm) {
                    alert('Les mots de passe ne correspondent pas');
                    return;
                }

                const userKey = `user-${username}`;
                const userResult = storage.get(userKey, true);

                if (userResult.exists) {
                    alert('Ce nom d\'utilisateur existe d√©j√†');
                    return;
                }

                const userData = {
                    password: password,
                    securityQuestion: securityQuestion,
                    securityAnswer: securityAnswer.toLowerCase()
                };

                storage.save(userKey, userData, true);
                alert('Compte cr√©√© avec succ√®s !');
                this.showLogin();
            }

            handlePasswordReset(e) {
                e.preventDefault();
                const username = document.getElementById('reset-username').value;
                const securityAnswer = document.getElementById('reset-security-answer').value;
                const newPassword = document.getElementById('reset-new-password').value;
                const passwordConfirm = document.getElementById('reset-password-confirm').value;

                if (newPassword !== passwordConfirm) {
                    alert('Les mots de passe ne correspondent pas');
                    return;
                }

                const userKey = `user-${username}`;
                const userResult = storage.get(userKey, true);

                if (!userResult.exists) {
                    alert('Nom d\'utilisateur incorrect');
                    return;
                }

                const userData = JSON.parse(userResult.value);
                if (userData.securityAnswer !== securityAnswer.toLowerCase()) {
                    alert('R√©ponse de s√©curit√© incorrecte');
                    return;
                }

                userData.password = newPassword;
                storage.save(userKey, userData, true);
                alert('Mot de passe r√©initialis√© avec succ√®s !');
                this.showLogin();
            }

            showLogin() {
                this.currentView = 'login';
                this.render();
            }

            showSignup() {
                this.currentView = 'signup';
                this.render();
            }

            showPasswordReset() {
                this.currentView = 'reset';
                this.render();
            }

            logout() {
                this.currentUser = null;
                this.sessions = [];
                this.rmHistory = [];
                this.currentView = 'login';
                this.render();
            }

            switchTab(tab) {
                this.currentTab = tab;
                this.render();
            }

            calculateRM(e) {
                e.preventDefault();
                const exercise = document.getElementById('rm-exercise').value;
                const weight = parseFloat(document.getElementById('rm-weight').value);
                const reps = parseInt(document.getElementById('rm-reps').value);
                const date = document.getElementById('rm-date').value;

                const rm = weight * (1 + reps / 30);
                
                // Enregistrer dans l'historique
                this.rmHistory.push({
                    exercise: exercise,
                    weight: weight,
                    reps: reps,
                    rm: parseFloat(rm.toFixed(1)),
                    date: date
                });
                this.saveRMHistory();

                const resultDiv = document.getElementById('rm-result');
                resultDiv.classList.remove('hidden');
                resultDiv.innerHTML = `
                    <div class="rm-result">
                        <div class="text-white" style="font-size: 1.2rem; opacity: 0.9; margin-bottom: 0.5rem;">Votre 1RM estim√© pour ${exercise}</div>
                        <div style="font-size: 3rem; font-weight: bold; color: #10b981; margin-bottom: 1rem;">${rm.toFixed(1)} kg</div>
                        <div class="text-white" style="opacity: 0.8;">Bas√© sur ${weight}kg √ó ${reps} r√©p√©tition${reps > 1 ? 's' : ''}</div>
                        <div class="text-cyan mt-2" style="font-size: 0.9rem;">‚úÖ Test enregistr√© dans l'historique</div>
                    </div>
                `;

                // Re-render pour afficher l'historique mis √† jour
                setTimeout(() => this.render(), 1500);
            }

            createNewSession() {
                this.currentSession = null;
                this.currentView = 'session-form';
                this.render();
                this.initSessionForm();
            }

            initSessionForm() {
                // Initialiser la liste des muscles
                const musclesList = document.getElementById('muscles-list');
                musclesList.innerHTML = this.musclesList.map(muscle => `
                    <button type="button" class="muscle-btn" onclick="app.toggleMuscle(this, '${muscle}')">${muscle}</button>
                `).join('');

                // Ajouter un exercice par d√©faut
                this.exercicesTemp = [];
                this.musclesTemp = [];
                this.addExercice();
            }

            toggleMuscle(btn, muscle) {
                btn.classList.toggle('active');
                if (this.musclesTemp.includes(muscle)) {
                    this.musclesTemp = this.musclesTemp.filter(m => m !== muscle);
                } else {
                    this.musclesTemp.push(muscle);
                }
            }

            addExercice() {
                const exercicesList = document.getElementById('exercices-list');
                const index = this.exercicesTemp.length;
                
                const exerciceHTML = `
                    <div class="exercise-card mb-2" id="exercice-${index}">
                        <div class="flex justify-between items-center mb-2">
                            <h4 class="text-cyan">Exercice ${index + 1}</h4>
                            <button class="btn btn-danger" style="padding: 0.5rem 1rem; font-size: 0.9rem;" onclick="app.removeExercice(${index})">üóëÔ∏è</button>
                        </div>
                        
                        <div class="mb-2">
                            <input type="text" class="input" placeholder="Nom de l'exercice" id="ex-name-${index}">
                        </div>
                        
                        <div class="grid grid-cols-3 gap-2 mb-2">
                            <div>
                                <label class="text-white" style="font-size: 0.85rem; display: block; margin-bottom: 0.25rem;">S√©ries</label>
                                <input type="number" class="input" placeholder="4" id="ex-series-${index}">
                            </div>
                            <div>
                                <label class="text-white" style="font-size: 0.85rem; display: block; margin-bottom: 0.25rem;">R√©p√©titions</label>
                                <input type="text" class="input" placeholder="8-12" id="ex-reps-${index}">
                            </div>
                            <div>
                                <label class="text-white" style="font-size: 0.85rem; display: block; margin-bottom: 0.25rem;">Charge</label>
                                <input type="text" class="input" placeholder="20kg" id="ex-charge-${index}">
                            </div>
                        </div>
                        
                        <div>
                            <label class="text-white" style="font-size: 0.85rem; display: block; margin-bottom: 0.25rem;">Temps de repos</label>
                            <input type="text" class="input" placeholder="Ex: 90 secondes" id="ex-repos-${index}">
                        </div>
                    </div>
                `;
                
                exercicesList.insertAdjacentHTML('beforeend', exerciceHTML);
                this.exercicesTemp.push({});
            }

            removeExercice(index) {
                const exerciceElement = document.getElementById(`exercice-${index}`);
                if (exerciceElement) {
                    exerciceElement.remove();
                }
            }

            saveSession() {
                const name = document.getElementById('session-name').value;
                const type = document.getElementById('session-type').value;

                if (!name || name.trim() === '') {
                    alert('Veuillez donner un nom √† la s√©ance');
                    return;
                }

                if (this.musclesTemp.length === 0) {
                    alert('Veuillez s√©lectionner au moins un muscle');
                    return;
                }

                // R√©cup√©rer tous les exercices
                const exercices = [];
                for (let i = 0; i < this.exercicesTemp.length; i++) {
                    const exName = document.getElementById(`ex-name-${i}`);
                    const exSeries = document.getElementById(`ex-series-${i}`);
                    const exReps = document.getElementById(`ex-reps-${i}`);
                    const exCharge = document.getElementById(`ex-charge-${i}`);
                    const exRepos = document.getElementById(`ex-repos-${i}`);

                    if (exName && exName.value.trim() !== '') {
                        exercices.push({
                            nom: exName.value,
                            series: exSeries.value || '4',
                            repetitions: exReps.value || '8-12',
                            charge: exCharge.value || '√Ä d√©finir',
                            repos: exRepos.value || '90 secondes'
                        });
                    }
                }

                if (exercices.length === 0) {
                    alert('Veuillez ajouter au moins un exercice');
                    return;
                }

                const session = {
                    nom: name,
                    type: type,
                    muscles: this.musclesTemp,
                    exercices: exercices
                };

                this.sessions.push(session);
                this.saveSessions();

                alert('‚úÖ S√©ance enregistr√©e avec succ√®s !');
                this.backToSessions();
            }

            viewSession(index) {
                this.currentSession = index;
                this.currentView = 'session-detail';
                this.render();
            }

            cancelSession() {
                this.currentSession = null;
                this.currentView = 'dashboard';
                this.currentTab = 'sessions';
                this.render();
            }

            backToSessions() {
                this.currentSession = null;
                this.currentView = 'dashboard';
                this.currentTab = 'sessions';
                this.render();
            }

            exportData() {
                const data = {
                    username: this.currentUser,
                    userData: JSON.parse(storage.get(`user-${this.currentUser}`, true).value),
                    sessions: this.sessions,
                    rmHistory: this.rmHistory,
                    exportDate: new Date().toISOString()
                };

                const dataStr = JSON.stringify(data, null, 2);
                const dataBlob = new Blob([dataStr], { type: 'application/json' });
                const url = URL.createObjectURL(dataBlob);
                
                const link = document.createElement('a');
                link.href = url;
                link.download = `livret-musculation-${this.currentUser}-${new Date().toISOString().split('T')[0]}.json`;
                link.click();
                
                URL.revokeObjectURL(url);
                alert('‚úÖ Donn√©es export√©es avec succ√®s ! Sauvegardez ce fichier sur votre Google Drive ou cl√© USB.');
            }

            importData() {
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = '.json';
                
                input.onchange = (e) => {
                    const file = e.target.files[0];
                    if (!file) return;
                    
                    const reader = new FileReader();
                    reader.onload = (event) => {
                        try {
                            const data = JSON.parse(event.target.result);
                            
                            // Sauvegarder les donn√©es utilisateur
                            const userKey = `user-${data.username}`;
                            storage.save(userKey, data.userData, true);
                            
                            // Se connecter avec ce compte
                            this.currentUser = data.username;
                            this.sessions = data.sessions || [];
                            this.rmHistory = data.rmHistory || [];
                            this.saveSessions();
                            this.saveRMHistory();
                            
                            alert('‚úÖ Donn√©es import√©es avec succ√®s ! Vous √™tes maintenant connect√©.');
                            this.render();
                        } catch (error) {
                            alert('‚ùå Erreur : Fichier invalide. Assurez-vous d\'importer un fichier export√© depuis ce livret.');
                        }
                    };
                    reader.readAsText(file);
                };
                
                input.click();
            }

            attachLoginEvents() {
                const loginForm = document.getElementById('login-form');
                const signupForm = document.getElementById('signup-form');
                
                if (loginForm) {
                    loginForm.addEventListener('submit', (e) => this.handleLogin(e));
                }
                
                if (signupForm) {
                    signupForm.addEventListener('submit', (e) => this.handleSignup(e));
                }
            }

            attachResetEvents() {
                const resetForm = document.getElementById('reset-form');
                const usernameInput = document.getElementById('reset-username');
                
                if (usernameInput) {
                    usernameInput.addEventListener('blur', () => {
                        const username = usernameInput.value;
                        if (username) {
                            const userKey = `user-${username}`;
                            const userResult = storage.get(userKey, true);
                            
                            if (userResult.exists) {
                                const userData = JSON.parse(userResult.value);
                                const questionContainer = document.getElementById('question-container');
                                const questionLabel = document.getElementById('question-label');
                                const passwordContainer = document.getElementById('password-container');
                                
                                questionLabel.textContent = securityQuestions[userData.securityQuestion];
                                questionContainer.style.display = 'block';
                                passwordContainer.style.display = 'block';
                            }
                        }
                    });
                }
                
                if (resetForm) {
                    resetForm.addEventListener('submit', (e) => this.handlePasswordReset(e));
                }
            }

            attachDashboardEvents() {
                const rmForm = document.getElementById('rm-form');
                if (rmForm) {
                    rmForm.addEventListener('submit', (e) => this.calculateRM(e));
                    
                    // D√©finir la date du jour par d√©faut
                    const dateInput = document.getElementById('rm-date');
                    if (dateInput) {
                        const today = new Date().toISOString().split('T')[0];
                        dateInput.value = today;
                    }
                }
            }

            attachSessionFormEvents() {
                // Les √©v√©nements sont g√©r√©s par onclick dans le HTML
            }
        }

        const app = new LivretApp();
    </script>
</body>
</html>