<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Livret Musculation CAP</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; 
            min-height: 100vh;
            background: linear-gradient(135deg, #0f172a 0%, #1e3a8a 50%, #0f172a 100%);
        }
        .container { max-width: 1200px; margin: 0 auto; padding: 1rem; }
        .card { 
            background: rgba(255, 255, 255, 0.1); 
            backdrop-filter: blur(10px);
            border-radius: 1.5rem; 
            padding: 2rem; 
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            margin-bottom: 1.5rem;
        }
        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
            font-size: 1rem;
        }
        .btn:hover { transform: scale(1.05); }
        .btn-primary { 
            background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%);
            color: white;
        }
        .btn-success { 
            background: linear-gradient(135deg, #10b981 0%, #14b8a6 100%);
            color: white;
        }
        .btn-secondary { 
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }
        .btn-danger { 
            background: rgba(239, 68, 68, 0.2);
            color: #fca5a5;
        }
        .btn-link {
            background: transparent;
            color: #67e8f9;
            text-decoration: underline;
            padding: 0.5rem;
            font-size: 0.875rem;
        }
        .input {
            width: 100%;
            padding: 0.75rem 1rem;
            border-radius: 0.75rem;
            border: 2px solid rgba(255, 255, 255, 0.3);
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
        }
        .input::placeholder { color: rgba(255, 255, 255, 0.5); }
        .input:focus { outline: none; border-color: #06b6d4; }
        select.input { 
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='white' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 0.75rem center;
            background-size: 1rem;
            padding-right: 2.5rem;
        }
        .text-white { color: white; }
        .text-cyan { color: #67e8f9; }
        .text-center { text-align: center; }
        .mb-1 { margin-bottom: 0.5rem; }
        .mb-2 { margin-bottom: 1rem; }
        .mb-4 { margin-bottom: 2rem; }
        .mt-2 { margin-top: 1rem; }
        .flex { display: flex; }
        .flex-col { flex-direction: column; }
        .items-center { align-items: center; }
        .justify-between { justify-content: space-between; }
        .gap-2 { gap: 0.5rem; }
        .gap-3 { gap: 1rem; }
        .grid { display: grid; }
        .grid-cols-2 { grid-template-columns: repeat(2, 1fr); }
        .grid-cols-3 { grid-template-columns: repeat(3, 1fr); }
        .grid-cols-5 { grid-template-columns: repeat(5, 1fr); }
        .hidden { display: none; }
        .muscle-btn {
            padding: 0.75rem;
            border-radius: 0.75rem;
            border: none;
            font-weight: 500;
            cursor: pointer;
            background: rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.7);
            transition: all 0.2s;
        }
        .muscle-btn.active {
            background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%);
            color: white;
            transform: scale(1.05);
        }
        .session-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            cursor: pointer;
        }
        .session-card:hover { background: rgba(255, 255, 255, 0.15); }
        .badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.875rem;
            font-weight: 500;
        }
        .badge-force { background: linear-gradient(135deg, #f97316 0%, #fb923c 100%); color: white; }
        .badge-endurance { background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%); color: white; }
        .badge-equilibre { background: linear-gradient(135deg, #10b981 0%, #14b8a6 100%); color: white; }
        .lock-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%);
            border-radius: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
        }
        .tab-btn {
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            background: rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.7);
        }
        .tab-btn.active {
            background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%);
            color: white;
        }
        .rm-result {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.2) 0%, rgba(20, 184, 166, 0.2) 100%);
            border: 2px solid rgba(16, 185, 129, 0.5);
            border-radius: 1rem;
            padding: 2rem;
            text-align: center;
            margin: 1.5rem 0;
        }
        
        /* Nouveaux styles pour Cours & Ressources */
        .sub-tab-btn {
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            border: none;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            background: rgba(255, 255, 255, 0.05);
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
        }
        .sub-tab-btn.active {
            background: rgba(6, 182, 212, 0.3);
            color: white;
            border: 1px solid rgba(6, 182, 212, 0.5);
        }
        .table-responsive {
            overflow-x: auto;
            border-radius: 0.75rem;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            background: rgba(255, 255, 255, 0.05);
        }
        th, td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
        }
        th {
            background: rgba(6, 182, 212, 0.2);
            font-weight: 600;
            color: #67e8f9;
        }
        tr:hover td {
            background: rgba(255, 255, 255, 0.05);
        }
        .info-box {
            background: rgba(6, 182, 212, 0.1);
            border-left: 4px solid #06b6d4;
            border-radius: 0.5rem;
            padding: 1rem;
            margin: 1rem 0;
        }
        .quiz-option {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 0.75rem;
            padding: 1rem;
            margin: 0.5rem 0;
            cursor: pointer;
            transition: all 0.2s;
            color: white;
        }
        .quiz-option:hover {
            background: rgba(255, 255, 255, 0.15);
            border-color: #06b6d4;
        }
        .quiz-option.correct {
            background: rgba(16, 185, 129, 0.2);
            border-color: #10b981;
        }
        .quiz-option.incorrect {
            background: rgba(239, 68, 68, 0.2);
            border-color: #ef4444;
        }
        .muscle-diagram {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 1rem;
            padding: 1.5rem;
            text-align: center;
        }
        .muscle-label {
            display: inline-block;
            background: rgba(6, 182, 212, 0.3);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            margin: 0.25rem;
            font-size: 0.9rem;
        }
        .exercise-card {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 1rem;
            padding: 1.5rem;
            margin: 1rem 0;
            border: 1px solid rgba(255, 255, 255, 0.15);
        }
        .nutrition-plan {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(20, 184, 166, 0.1) 100%);
            border: 2px solid rgba(16, 185, 129, 0.3);
            border-radius: 1rem;
            padding: 1.5rem;
            margin: 1rem 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="app-container"></div>
    </div>

    <script>const storage = {
            set(key, value, isGlobal = false) {
                const storageKey = isGlobal ? key : `${this.getCurrentUser()}-${key}`;
                localStorage.setItem(storageKey, JSON.stringify(value));
            },
            get(key, isGlobal = false) {
                const storageKey = isGlobal ? key : `${this.getCurrentUser()}-${key}`;
                const item = localStorage.getItem(storageKey);
                return item ? { value: item, exists: true } : { value: null, exists: false };
            },
            getCurrentUser() {
                return localStorage.getItem('currentUser') || '';
            }
        };

        const securityQuestions = {
            pet: "Quel est le nom de votre premier animal de compagnie ?",
            city: "Dans quelle ville √™tes-vous n√©(e) ?",
            school: "Quel √©tait le nom de votre √©cole primaire ?",
            food: "Quel est votre plat pr√©f√©r√© ?"
        };

        const coursData = {
            mobiles: [
                {
                    nom: "Force Maximale",
                    emoji: "üèãÔ∏è",
                    objectif: "D√©velopper la force pure",
                    charges: "85-100% du 1RM",
                    series: "3-6 s√©ries",
                    repetitions: "1-5 r√©p√©titions",
                    repos: "3-5 minutes",
                    tempo: "Explosif/Contr√¥l√©",
                    frequence: "2-3 fois/semaine",
                    exemples: "Squat lourd, D√©velopp√© couch√©, Soulev√© de terre",
                    benefices: "Augmentation force maximale, Recrutement fibres rapides, Performance athl√©tique",
                    precautions: "√âchauffement approfondi, Technique parfaite, R√©cup√©ration importante"
                },
                {
                    nom: "Hypertrophie (Prise de muscle)",
                    emoji: "üí™",
                    objectif: "Augmenter la masse musculaire",
                    charges: "65-85% du 1RM",
                    series: "3-5 s√©ries",
                    repetitions: "6-12 r√©p√©titions",
                    repos: "60-90 secondes",
                    tempo: "2-0-2 (Contr√¥l√©)",
                    frequence: "3-5 fois/semaine",
                    exemples: "D√©velopp√© inclin√©, Rowing, Curl biceps",
                    benefices: "Volume musculaire, Esth√©tique, M√©tabolisme augment√©",
                    precautions: "Variation des exercices, Nutrition adapt√©e, Repos suffisant"
                },
                {
                    nom: "Endurance Musculaire",
                    emoji: "üî•",
                    objectif: "Am√©liorer l'endurance locale",
                    charges: "40-65% du 1RM",
                    series: "2-4 s√©ries",
                    repetitions: "12-20+ r√©p√©titions",
                    repos: "30-60 secondes",
                    tempo: "1-0-1 (Rapide)",
                    frequence: "4-6 fois/semaine",
                    exemples: "Circuit training, Extensions jambes, Pompes",
                    benefices: "Endurance locale, Tonus musculaire, R√©sistance √† la fatigue",
                    precautions: "Hydratation ++, Progression graduelle, Risque de surentra√Ænement"
                }
            ],
            
            nutritionPlans: {
                perte: {
                    nom: "Plan Perte de Poids",
                    emoji: "üî•",
                    deficit: "-300 √† -500 kcal/jour",
                    proteines: "2.0-2.5g/kg",
                    glucides: "2-3g/kg",
                    lipides: "0.8-1g/kg",
                    repas: [
                        "Petit-d√©jeuner: ≈íufs, flocons d'avoine, fruits rouges",
                        "Collation: Yaourt grec, amandes",
                        "D√©jeuner: Poulet grill√©, quinoa, l√©gumes verts",
                        "Collation: Prot√©ine shake, pomme",
                        "D√Æner: Poisson, patate douce, brocolis"
                    ],
                    conseils: [
                        "D√©ficit calorique mod√©r√©",
                        "Maintenir les prot√©ines √©lev√©es",
                        "Favoriser les aliments rassasiants",
                        "Boire 2-3L d'eau par jour",
                        "Cardio l√©ger 2-3x/semaine"
                    ]
                },
                prise: {
                    nom: "Plan Prise de Muscle",
                    emoji: "üí™",
                    surplus: "+300 √† +500 kcal/jour",
                    proteines: "1.8-2.2g/kg",
                    glucides: "4-6g/kg",
                    lipides: "1-1.2g/kg",
                    repas: [
                        "Petit-d√©jeuner: Pancakes prot√©in√©s, beurre d'amande, banane",
                        "Collation: Flocons d'avoine, whey, fruits secs",
                        "D√©jeuner: B≈ìuf, riz basmati, avocat, l√©gumes",
                        "Collation: Pain complet, thon, fromage blanc",
                        "D√Æner: Saumon, p√¢tes compl√®tes, huile d'olive, salade"
                    ],
                    conseils: [
                        "Surplus calorique contr√¥l√©",
                        "Glucides autour de l'entra√Ænement",
                        "5-6 repas par jour",
                        "Prot√©ines √† chaque repas",
                        "Patience et r√©gularit√©"
                    ]
                },
                equilibre: {
                    nom: "Plan √âquilibr√©",
                    emoji: "‚öñÔ∏è",
                    calories: "Maintien (poids stable)",
                    proteines: "1.6-2.0g/kg",
                    glucides: "3-4g/kg",
                    lipides: "1g/kg",
                    repas: [
                        "Petit-d√©jeuner: Porridge, fruits frais, noix",
                        "Collation: Fruits, quelques amandes",
                        "D√©jeuner: Viande maigre, riz/p√¢tes, l√©gumes vari√©s",
                        "Collation: Fromage blanc, miel",
                        "D√Æner: Poisson ou volaille, l√©gumineuses, salade"
                    ],
                    conseils: [
                        "80/20 : 80% aliments sains, 20% plaisir",
                        "Vari√©t√© dans l'assiette",
                        "√âcouter sa faim",
                        "Hydratation r√©guli√®re",
                        "Flexibilit√© et plaisir"
                    ]
                }
            },
            
            hygiene: {
                sommeil: [
                    "7-9h de sommeil par nuit minimum",
                    "Horaires r√©guliers (coucher/lever)",
                    "Chambre fra√Æche (18-20¬∞C)",
                    "√âviter √©crans 1h avant le coucher",
                    "Routine de relaxation",
                    "Pas de caf√©ine apr√®s 16h"
                ],
                hydratation: [
                    "Minimum 2-3L d'eau par jour",
                    "+500ml pour chaque heure d'entra√Ænement",
                    "Eau avant/pendant/apr√®s l'effort",
                    "Surveiller la couleur des urines (jaune clair)",
                    "Augmenter par temps chaud",
                    "√âlectrolytes si effort > 1h"
                ],
                recuperation: [
                    "1-2 jours de repos complet par semaine",
                    "√âtirements l√©gers quotidiens",
                    "Foam roller / automassages",
                    "Gestion du stress (m√©ditation, respiration)",
                    "Bains froids ou chauds selon besoins",
                    "√âcouter son corps (fatigue, douleurs)"
                ]
            },
            
            conseilsSeance: {
                avant: [
                    "Repas 2-3h avant l'entra√Ænement",
                    "Collation glucidique 30-60min avant si besoin",
                    "Hydratation : 500ml d'eau 2h avant",
                    "√âchauffement g√©n√©ral : 5-10min cardio l√©ger",
                    "Mobilisation articulaire sp√©cifique",
                    "√âchauffement sp√©cifique : s√©ries l√©g√®res progressives"
                ],
                pendant: [
                    "Respiration : expirer sur l'effort",
                    "Hydratation : petites gorg√©es r√©guli√®res",
                    "Concentration sur la technique",
                    "Tempo contr√¥l√© (√©viter balancement)",
                    "Repos entre s√©ries respect√©s",
                    "Noter ses performances (carnet/app)"
                ],
                apres: [
                    "Retour au calme : 5min cardio l√©ger",
                    "√âtirements statiques l√©gers (10-15min)",
                    "R√©hydratation imm√©diate",
                    "Collation prot√©ines+glucides dans les 30-60min",
                    "Douche ti√®de ou froide selon pr√©f√©rence",
                    "Sommeil de qualit√© pour r√©cup√©ration"
                ]
            },
            
            quizQuestions: [
                {
                    question: "Quel muscle est responsable de la flexion du coude ?",
                    options: ["Triceps", "Biceps", "Delto√Øde", "Trap√®ze"],
                    correct: 1,
                    explication: "Le biceps brachial est le principal muscle fl√©chisseur du coude."
                },
                {
                    question: "Les pectoraux sont situ√©s o√π ?",
                    options: ["Sur le dos", "Sur la poitrine", "Sur les √©paules", "Sur les bras"],
                    correct: 1,
                    explication: "Les pectoraux (grand et petit pectoral) sont les muscles de la poitrine."
                },
                {
                    question: "Quel est le plus grand muscle du corps humain ?",
                    options: ["Grand dorsal", "Grand fessier", "Quadriceps", "Grand pectoral"],
                    correct: 1,
                    explication: "Le grand fessier (gluteus maximus) est le muscle le plus volumineux du corps."
                },
                {
                    question: "Les quadriceps sont compos√©s de combien de chefs ?",
                    options: ["2", "3", "4", "5"],
                    correct: 2,
                    explication: "Les quadriceps sont compos√©s de 4 chefs : vaste lat√©ral, vaste m√©dial, vaste interm√©diaire et droit f√©moral."
                },
                {
                    question: "Quel muscle permet la rotation externe de l'√©paule ?",
                    options: ["Infra-√©pineux", "Biceps", "Triceps", "Pectoral"],
                    correct: 0,
                    explication: "L'infra-√©pineux fait partie de la coiffe des rotateurs et permet la rotation externe de l'√©paule."
                },
                {
                    question: "Les ischio-jambiers sont situ√©s √† l'arri√®re de quelle partie du corps ?",
                    options: ["Bras", "Avant-bras", "Cuisse", "Mollet"],
                    correct: 2,
                    explication: "Les ischio-jambiers sont situ√©s √† l'arri√®re de la cuisse."
                },
                {
                    question: "Quel muscle forme le 'V' du dos ?",
                    options: ["Trap√®ze", "Grand dorsal", "Rhombo√Øde", "Delto√Øde"],
                    correct: 1,
                    explication: "Le grand dorsal (latissimus dorsi) cr√©e la forme en V caract√©ristique du dos."
                },
                {
                    question: "Les delto√Ødes sont compos√©s de combien de faisceaux ?",
                    options: ["1", "2", "3", "4"],
                    correct: 2,
                    explication: "Les delto√Ødes ont 3 faisceaux : ant√©rieur, moyen (lat√©ral) et post√©rieur."
                },
                {
                    question: "Quel muscle est sollicit√© lors d'un crunch abdominal ?",
                    options: ["Obliques", "Grand droit", "Transverse", "Tous ces muscles"],
                    correct: 3,
                    explication: "Le crunch sollicite principalement le grand droit, mais aussi les obliques et le transverse de fa√ßon secondaire."
                },
                {
                    question: "Les gastrocn√©miens font partie de quel groupe musculaire ?",
                    options: ["Quadriceps", "Ischio-jambiers", "Mollets", "Tibial"],
                    correct: 2,
                    explication: "Les gastrocn√©miens (jumeaux) forment la masse principale des mollets avec le sol√©aire."
                }
            ],
            
            exercicesBase: {
                pectoraux: [
                    {
                        nom: "D√©velopp√© couch√©",
                        description: "Exercice de base pour les pectoraux",
                        execution: "Allong√© sur banc, descendre la barre au niveau des t√©tons, remonter en contractant",
                        muscles: "Pectoraux, triceps, delto√Ødes ant√©rieurs"
                    },
                    {
                        nom: "D√©velopp√© inclin√©",
                        description: "Cible le haut des pectoraux",
                        execution: "Banc inclin√© 30-45¬∞, m√™me mouvement que le d√©velopp√© couch√©",
                        muscles: "Haut des pectoraux, delto√Ødes ant√©rieurs"
                    },
                    {
                        nom: "√âcart√© halt√®res",
                        description: "√âtirement et contraction des pectoraux",
                        execution: "Bras semi-fl√©chis, descendre lat√©ralement, remonter en contractant",
                        muscles: "Pectoraux (√©tirement)"
                    }
                ],
                dos: [
                    {
                        nom: "Tractions",
                        description: "Exercice au poids de corps pour le dos",
                        execution: "Suspendre √† une barre, tirer jusqu'√† menton au niveau de la barre",
                        muscles: "Grand dorsal, biceps, trap√®ze"
                    },
                    {
                        nom: "Rowing barre",
                        description: "D√©veloppement de l'√©paisseur du dos",
                        execution: "Buste pench√© 45¬∞, tirer la barre vers le nombril",
                        muscles: "Grand dorsal, trap√®ze, rhombo√Ødes"
                    },
                    {
                        nom: "Tirage vertical",
                        description: "Alternative aux tractions",
                        execution: "Assis, tirer la barre vers le haut de la poitrine",
                        muscles: "Grand dorsal, biceps"
                    },
                    {
                        nom: "Soulev√© de terre",
                        description: "Exercice poly-articulaire complet",
                        execution: "Dos droit, soulever la barre du sol jusqu'√† position debout",
                        muscles: "Dos complet, ischio-jambiers, fessiers, trap√®ze"
                    }
                ],
                jambes: [
                    {
                        nom: "Squat",
                        description: "Roi des exercices pour les jambes",
                        execution: "Barre sur les √©paules, descendre jusqu'√† parall√®le ou plus, remonter",
                        muscles: "Quadriceps, fessiers, ischio-jambiers"
                    },
                    {
                        nom: "Presse √† cuisses",
                        description: "Alternative au squat",
                        execution: "Pieds sur la plateforme, descendre genoux vers poitrine, pousser",
                        muscles: "Quadriceps, fessiers"
                    },
                    {
                        nom: "Fentes",
                        description: "Exercice unilat√©ral pour les jambes",
                        execution: "Avancer une jambe, descendre genou arri√®re vers le sol",
                        muscles: "Quadriceps, fessiers, ischio-jambiers"
                    },
                    {
                        nom: "Leg curl",
                        description: "Isolation des ischio-jambiers",
                        execution: "Allong√© ou assis, ramener les talons vers les fessiers",
                        muscles: "Ischio-jambiers"
                    }
                ],
                epaules: [
                    {
                        nom: "D√©velopp√© militaire",
                        description: "Exercice de base pour les √©paules",
                        execution: "Debout ou assis, pousser la barre au-dessus de la t√™te",
                        muscles: "Delto√Ødes, triceps"
                    },
                    {
                        nom: "√âl√©vations lat√©rales",
                        description: "Isolation des delto√Ødes moyens",
                        execution: "Bras le long du corps, √©lever lat√©ralement jusqu'√† l'horizontale",
                        muscles: "Delto√Øde moyen"
                    },
                    {
                        nom: "Oiseau",
                        description: "Ciblage delto√Ødes post√©rieurs",
                        execution: "Buste pench√©, √©lever les bras lat√©ralement",
                        muscles: "Delto√Øde post√©rieur, trap√®ze"
                    }
                ],
                bras: [
                    {
                        nom: "Curl barre",
                        description: "Exercice de base pour les biceps",
                        execution: "Debout, coudes fixes, fl√©chir les avant-bras",
                        muscles: "Biceps"
                    },
                    {
                        nom: "Dips",
                        description: "Exercice au poids de corps pour les triceps",
                        execution: "Mains sur barres parall√®les, descendre et remonter",
                        muscles: "Triceps, pectoraux"
                    },
                    {
                        nom: "Extension triceps poulie haute",
                        description: "Isolation des triceps",
                        execution: "Coudes fixes, tendre les bras vers le bas",
                        muscles: "Triceps"
                    }
                ],
                abdominaux: [
                    {
                        nom: "Crunch",
                        description: "Exercice de base pour les abdos",
                        execution: "Allong√©, relever le buste en contractant les abdominaux",
                        muscles: "Grand droit"
                    },
                    {
                        nom: "Planche",
                        description: "Gainage statique",
                        execution: "Position pompe sur avant-bras, tenir la position",
                        muscles: "Transverse, grand droit, obliques"
                    },
                    {
                        nom: "Russian twist",
                        description: "Rotation du buste pour les obliques",
                        execution: "Assis, pieds lev√©s, rotation du buste de gauche √† droite",
                        muscles: "Obliques, grand droit"
                    }
                ]
            }
        };class LivretApp {
            constructor() {
                this.currentScreen = 'login';
                this.currentUser = null;
                this.sessions = [];
                this.currentSession = null;
                this.activeTab = 'dashboard';
                this.activeCoursTab = 'mobiles';
                this.quizScore = 0;
                this.quizCurrentQuestion = 0;
                this.quizAnswers = [];
                
                this.objectifs = [
                    { value: 'force', label: 'üèãÔ∏è Force' },
                    { value: 'hypertrophie', label: 'üí™ Hypertrophie' },
                    { value: 'endurance', label: 'üî• Endurance' }
                ];
                
                this.musclesList = [
                    'Pectoraux', 'Dos', '√âpaules', 'Biceps', 'Triceps',
                    'Quadriceps', 'Ischio', 'Fessiers', 'Mollets', 'Abdos'
                ];
                
                this.init();
            }

            init() {
                const user = localStorage.getItem('currentUser');
                if (user) {
                    this.currentUser = user;
                    this.loadSessions();
                    this.showDashboard();
                } else {
                    this.showLogin();
                }
            }

            showLogin() {
                this.currentScreen = 'login';
                this.render();
            }

            showSignup() {
                this.currentScreen = 'signup';
                this.render();
            }

            showPasswordReset() {
                this.currentScreen = 'reset';
                this.render();
            }

            showDashboard() {
                this.currentScreen = 'dashboard';
                this.activeTab = 'dashboard';
                this.render();
            }

            handleLogin(e) {
                e.preventDefault();
                const username = document.getElementById('login-username').value;
                const password = document.getElementById('login-password').value;
                
                const userKey = `user-${username}`;
                const userResult = storage.get(userKey, true);
                
                if (userResult.exists) {
                    const userData = JSON.parse(userResult.value);
                    if (userData.password === password) {
                        this.currentUser = username;
                        localStorage.setItem('currentUser', username);
                        this.loadSessions();
                        this.showDashboard();
                    } else {
                        alert('Mot de passe incorrect');
                    }
                } else {
                    alert('Utilisateur non trouv√©');
                }
            }

            handleSignup(e) {
                e.preventDefault();
                const username = document.getElementById('signup-username').value;
                const password = document.getElementById('signup-password').value;
                const confirmPassword = document.getElementById('signup-confirm').value;
                const securityQuestion = document.getElementById('signup-question').value;
                const securityAnswer = document.getElementById('signup-answer').value;
                
                if (password !== confirmPassword) {
                    alert('Les mots de passe ne correspondent pas');
                    return;
                }
                
                const userKey = `user-${username}`;
                const existing = storage.get(userKey, true);
                
                if (existing.exists) {
                    alert('Cet utilisateur existe d√©j√†');
                    return;
                }
                
                const userData = {
                    password,
                    securityQuestion,
                    securityAnswer: securityAnswer.toLowerCase()
                };
                
                storage.set(userKey, userData, true);
                alert('Compte cr√©√© avec succ√®s !');
                this.showLogin();
            }

            handlePasswordReset(e) {
                e.preventDefault();
                const username = document.getElementById('reset-username').value;
                const answer = document.getElementById('reset-answer').value;
                const newPassword = document.getElementById('reset-password').value;
                
                const userKey = `user-${username}`;
                const userResult = storage.get(userKey, true);
                
                if (userResult.exists) {
                    const userData = JSON.parse(userResult.value);
                    if (userData.securityAnswer === answer.toLowerCase()) {
                        userData.password = newPassword;
                        storage.set(userKey, userData, true);
                        alert('Mot de passe r√©initialis√© !');
                        this.showLogin();
                    } else {
                        alert('R√©ponse incorrecte');
                    }
                } else {
                    alert('Utilisateur non trouv√©');
                }
            }

            logout() {
                localStorage.removeItem('currentUser');
                this.currentUser = null;
                this.sessions = [];
                this.showLogin();
            }

            loadSessions() {
                const result = storage.get('sessions');
                this.sessions = result.exists ? JSON.parse(result.value) : [];
            }

            saveSessions() {
                storage.set('sessions', this.sessions);
            }

            switchTab(tab) {
                this.activeTab = tab;
                this.render();
            }

            switchCoursTab(tab) {
                this.activeCoursTab = tab;
                this.render();
            }

            createSession() {
                this.currentSession = {
                    id: Date.now(),
                    date: new Date().toISOString().split('T')[0],
                    objectif: 'hypertrophie',
                    echauffement: {
                        cardio: '',
                        mobilisation: '',
                        activation: ''
                    },
                    exercices: [],
                    muscles: [],
                    ressenti: '',
                    progression: ''
                };
                this.switchTab('session-form');
            }

            editSession(id) {
                this.currentSession = JSON.parse(JSON.stringify(this.sessions.find(s => s.id === id)));
                this.switchTab('session-form');
            }

            deleteSession(id) {
                if (confirm('Supprimer cette s√©ance ?')) {
                    this.sessions = this.sessions.filter(s => s.id !== id);
                    this.saveSessions();
                    this.render();
                }
            }

            saveSession() {
                this.currentSession.date = document.getElementById('session-date').value;
                this.currentSession.objectif = document.getElementById('session-objectif').value;
                this.currentSession.echauffement.cardio = document.getElementById('echauf-cardio').value;
                this.currentSession.echauffement.mobilisation = document.getElementById('echauf-mobilisation').value;
                this.currentSession.echauffement.activation = document.getElementById('echauf-activation').value;
                this.currentSession.ressenti = document.getElementById('session-ressenti').value;
                this.currentSession.progression = document.getElementById('session-progression').value;
                
                const existingIndex = this.sessions.findIndex(s => s.id === this.currentSession.id);
                if (existingIndex >= 0) {
                    this.sessions[existingIndex] = this.currentSession;
                } else {
                    this.sessions.push(this.currentSession);
                }
                
                this.saveSessions();
                this.currentSession = null;
                this.switchTab('sessions');
            }

            cancelSession() {
                this.currentSession = null;
                this.switchTab('sessions');
            }

            addExercice() {
                this.currentSession.exercices.push({
                    nom: '',
                    series: '',
                    repetitions: '',
                    charge: '',
                    repos: ''
                });
                this.renderExercices();
            }

            removeExercice(index) {
                this.currentSession.exercices.splice(index, 1);
                this.renderExercices();
            }

            toggleMuscle(muscle) {
                const index = this.currentSession.muscles.indexOf(muscle);
                if (index >= 0) {
                    this.currentSession.muscles.splice(index, 1);
                } else {
                    this.currentSession.muscles.push(muscle);
                }
                this.renderMuscles();
            }

            calculateRM(e) {
                e.preventDefault();
                const weight = parseFloat(document.getElementById('rm-weight').value);
                const reps = parseInt(document.getElementById('rm-reps').value);
                
                const rm = weight / (1.0278 - (0.0278 * reps));
                
                const resultHTML = `
                    <div class="rm-result">
                        <h3 class="text-white mb-2" style="font-size: 1.5rem;">Votre 1RM estim√©</h3>
                        <div style="font-size: 3rem; font-weight: bold; color: #10b981; margin: 1rem 0;">
                            ${rm.toFixed(1)} kg
                        </div>
                        <div class="grid grid-cols-3 gap-3 mt-4" style="text-align: center;">
                            <div>
                                <div class="text-cyan" style="font-size: 0.875rem;">Force (90%)</div>
                                <div class="text-white" style="font-size: 1.25rem; font-weight: bold;">${(rm * 0.9).toFixed(1)} kg</div>
                            </div>
                            <div>
                                <div class="text-cyan" style="font-size: 0.875rem;">Hypertrophie (75%)</div>
                                <div class="text-white" style="font-size: 1.25rem; font-weight: bold;">${(rm * 0.75).toFixed(1)} kg</div>
                            </div>
                            <div>
                                <div class="text-cyan" style="font-size: 0.875rem;">Endurance (60%)</div>
                                <div class="text-white" style="font-size: 1.25rem; font-weight: bold;">${(rm * 0.6).toFixed(1)} kg</div>
                            </div>
                        </div>
                    </div>
                `;
                
                document.getElementById('rm-result').innerHTML = resultHTML;
            }

            startQuiz() {
                this.quizScore = 0;
                this.quizCurrentQuestion = 0;
                this.quizAnswers = [];
                this.render();
            }

            answerQuiz(selectedIndex) {
                const question = coursData.quizQuestions[this.quizCurrentQuestion];
                const isCorrect = selectedIndex === question.correct;
                
                this.quizAnswers.push({
                    question: question.question,
                    selected: selectedIndex,
                    correct: question.correct,
                    isCorrect: isCorrect
                });
                
                if (isCorrect) {
                    this.quizScore++;
                }
                
                const options = document.querySelectorAll('.quiz-option');
                options[selectedIndex].classList.add(isCorrect ? 'correct' : 'incorrect');
                options[question.correct].classList.add('correct');
                options.forEach(opt => opt.style.pointerEvents = 'none');
                
                document.getElementById('quiz-explanation').innerHTML = `
                    <div class="info-box" style="margin-top: 1rem;">
                        <strong>${isCorrect ? '‚úÖ Correct !' : '‚ùå Incorrect'}</strong><br>
                        ${question.explication}
                    </div>
                `;
                
                setTimeout(() => {
                    if (this.quizCurrentQuestion < coursData.quizQuestions.length - 1) {
                        this.quizCurrentQuestion++;
                        this.render();
                    } else {
                        this.showQuizResults();
                    }
                }, 3000);
            }

            showQuizResults() {
                const percentage = (this.quizScore / coursData.quizQuestions.length * 100).toFixed(0);
                let message = '';
                let emoji = '';
                
                if (percentage >= 90) {
                    message = 'Excellent ! Vous ma√Ætrisez l\'anatomie !';
                    emoji = 'üèÜ';
                } else if (percentage >= 70) {
                    message = 'Tr√®s bien ! Quelques r√©visions et ce sera parfait !';
                    emoji = 'üåü';
                } else if (percentage >= 50) {
                    message = 'Pas mal ! Continuez √† apprendre !';
                    emoji = 'üëç';
                } else {
                    message = 'Il faut r√©viser un peu plus !';
                    emoji = 'üìö';
                }
                
                document.getElementById('app-container').innerHTML = `
                    <div class="card">
                        <div class="text-center">
                            <h2 class="text-white mb-4" style="font-size: 2rem;">R√©sultats du Quiz ${emoji}</h2>
                            <div style="font-size: 4rem; margin: 2rem 0;">
                                ${percentage}%
                            </div>
                            <h3 class="text-cyan mb-4" style="font-size: 1.5rem;">
                                ${this.quizScore} / ${coursData.quizQuestions.length} bonnes r√©ponses
                            </h3>
                            <p class="text-white mb-4" style="font-size: 1.25rem;">${message}</p>
                            <div class="flex gap-3" style="justify-content: center;">
                                <button class="btn btn-primary" onclick="app.startQuiz()">üîÑ Recommencer</button>
                                <button class="btn btn-secondary" onclick="app.switchCoursTab('mobiles'); app.render();">üìö Retour aux cours</button>
                            </div>
                        </div>
                    </div>
                `;
            }render() {
                const container = document.getElementById('app-container');
                
                if (this.currentScreen === 'login') {
                    container.innerHTML = this.renderLogin();
                    this.attachLoginEvents();
                } else if (this.currentScreen === 'signup') {
                    container.innerHTML = this.renderSignup();
                    this.attachLoginEvents();
                } else if (this.currentScreen === 'reset') {
                    container.innerHTML = this.renderPasswordReset();
                    this.attachResetEvents();
                } else if (this.currentScreen === 'dashboard') {
                    container.innerHTML = this.renderDashboard();
                    if (this.activeTab === 'dashboard') {
                        this.attachDashboardEvents();
                    } else if (this.activeTab === 'session-form') {
                        this.attachSessionFormEvents();
                    }
                }
            }

            renderLogin() {
                return `
                    <div class="card" style="max-width: 500px; margin: 4rem auto;">
                        <div class="text-center mb-4">
                            <div class="lock-icon" style="margin: 0 auto 1.5rem;">üîí</div>
                            <h1 class="text-white" style="font-size: 2rem; font-weight: bold;">Livret Musculation</h1>
                            <p class="text-cyan mt-2">Connectez-vous pour continuer</p>
                        </div>
                        
                        <form id="login-form">
                            <div class="mb-2">
                                <input type="text" id="login-username" class="input" placeholder="Nom d'utilisateur" required>
                            </div>
                            <div class="mb-2">
                                <input type="password" id="login-password" class="input" placeholder="Mot de passe" required>
                            </div>
                            <button type="submit" class="btn btn-primary" style="width: 100%; margin-bottom: 1rem;">Se connecter</button>
                            <button type="button" class="btn btn-link" onclick="app.showPasswordReset()" style="width: 100%; margin-bottom: 0.5rem;">Mot de passe oubli√© ?</button>
                            <button type="button" class="btn btn-secondary" onclick="app.showSignup()" style="width: 100%;">Cr√©er un compte</button>
                        </form>
                    </div>
                `;
            }

            renderSignup() {
                return `
                    <div class="card" style="max-width: 500px; margin: 4rem auto;">
                        <h2 class="text-white mb-4 text-center" style="font-size: 1.75rem; font-weight: bold;">Cr√©er un compte</h2>
                        
                        <form id="signup-form">
                            <div class="mb-2">
                                <input type="text" id="signup-username" class="input" placeholder="Nom d'utilisateur" required>
                            </div>
                            <div class="mb-2">
                                <input type="password" id="signup-password" class="input" placeholder="Mot de passe" required>
                            </div>
                            <div class="mb-2">
                                <input type="password" id="signup-confirm" class="input" placeholder="Confirmer le mot de passe" required>
                            </div>
                            <div class="mb-2">
                                <select id="signup-question" class="input" required>
                                    <option value="">Question de s√©curit√©...</option>
                                    ${Object.entries(securityQuestions).map(([key, question]) => 
                                        `<option value="${key}">${question}</option>`
                                    ).join('')}
                                </select>
                            </div>
                            <div class="mb-4">
                                <input type="text" id="signup-answer" class="input" placeholder="R√©ponse" required>
                            </div>
                            <button type="submit" class="btn btn-success" style="width: 100%; margin-bottom: 1rem;">Cr√©er le compte</button>
                            <button type="button" class="btn btn-secondary" onclick="app.showLogin()" style="width: 100%;">Retour</button>
                        </form>
                    </div>
                `;
            }

            renderPasswordReset() {
                return `
                    <div class="card" style="max-width: 500px; margin: 4rem auto;">
                        <h2 class="text-white mb-4 text-center" style="font-size: 1.75rem; font-weight: bold;">R√©initialiser le mot de passe</h2>
                        
                        <form id="reset-form">
                            <div class="mb-2">
                                <input type="text" id="reset-username" class="input" placeholder="Nom d'utilisateur" required>
                            </div>
                            <div id="question-container" class="mb-2" style="display: none;">
                                <label id="question-label" class="text-cyan mb-1" style="display: block;"></label>
                                <input type="text" id="reset-answer" class="input" placeholder="Votre r√©ponse" required>
                            </div>
                            <div id="password-container" class="mb-4" style="display: none;">
                                <input type="password" id="reset-password" class="input" placeholder="Nouveau mot de passe" required>
                            </div>
                            <button type="submit" class="btn btn-primary" style="width: 100%; margin-bottom: 1rem;">R√©initialiser</button>
                            <button type="button" class="btn btn-secondary" onclick="app.showLogin()" style="width: 100%;">Retour</button>
                        </form>
                    </div>
                `;
            }

            renderDashboard() {
                return `
                    <div style="background: rgba(255, 255, 255, 0.1); border-radius: 1rem; padding: 1rem; margin-bottom: 1.5rem;">
                        <div class="flex justify-between items-center" style="flex-wrap: wrap; gap: 1rem;">
                            <h1 class="text-white" style="font-size: 1.5rem; font-weight: bold;">üë§ ${this.currentUser}</h1>
                            <button class="btn btn-danger" onclick="app.logout()">D√©connexion</button>
                        </div>
                    </div>

                    <div class="flex gap-2 mb-4" style="overflow-x: auto; flex-wrap: wrap;">
                        <button class="tab-btn ${this.activeTab === 'dashboard' ? 'active' : ''}" onclick="app.switchTab('dashboard')">üìä Tableau de bord</button>
                        <button class="tab-btn ${this.activeTab === 'sessions' ? 'active' : ''}" onclick="app.switchTab('sessions')">üìù Mes s√©ances</button>
                        <button class="tab-btn ${this.activeTab === 'cours' ? 'active' : ''}" onclick="app.switchTab('cours')">üìö Cours & Ressources</button>
                    </div>

                    ${this.activeTab === 'dashboard' ? this.renderDashboardTab() : ''}
                    ${this.activeTab === 'sessions' ? this.renderSessionsTab() : ''}
                    ${this.activeTab === 'session-form' ? this.renderSessionForm() : ''}
                    ${this.activeTab === 'cours' ? this.renderCoursTab() : ''}
                `;
            }

            renderDashboardTab() {
                return `
                    <div class="card">
                        <h2 class="text-white mb-4" style="font-size: 1.5rem; font-weight: bold;">üìä Tableau de bord</h2>
                        
                        <div class="grid grid-cols-3 gap-3 mb-4">
                            <div style="background: linear-gradient(135deg, rgba(6, 182, 212, 0.2) 0%, rgba(59, 130, 246, 0.2) 100%); padding: 1.5rem; border-radius: 1rem; text-align: center;">
                                <div class="text-cyan" style="font-size: 0.875rem;">Total s√©ances</div>
                                <div class="text-white" style="font-size: 2rem; font-weight: bold; margin-top: 0.5rem;">${this.sessions.length}</div>
                            </div>
                            <div style="background: linear-gradient(135deg, rgba(249, 115, 22, 0.2) 0%, rgba(251, 146, 60, 0.2) 100%); padding: 1.5rem; border-radius: 1rem; text-align: center;">
                                <div style="color: #fed7aa; font-size: 0.875rem;">Force</div>
                                <div class="text-white" style="font-size: 2rem; font-weight: bold; margin-top: 0.5rem;">${this.sessions.filter(s => s.objectif === 'force').length}</div>
                            </div>
                            <div style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.2) 0%, rgba(20, 184, 166, 0.2) 100%); padding: 1.5rem; border-radius: 1rem; text-align: center;">
                                <div style="color: #6ee7b7; font-size: 0.875rem;">Hypertrophie</div>
                                <div class="text-white" style="font-size: 2rem; font-weight: bold; margin-top: 0.5rem;">${this.sessions.filter(s => s.objectif === 'hypertrophie').length}</div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <h3 class="text-white mb-4" style="font-size: 1.25rem; font-weight: bold;">üßÆ Calculateur 1RM</h3>
                        <form id="rm-form" class="grid grid-cols-2 gap-3">
                            <div>
                                <label class="text-cyan mb-1" style="display: block;">Charge (kg)</label>
                                <input type="number" id="rm-weight" class="input" placeholder="Ex: 80" step="0.5" required>
                            </div>
                            <div>
                                <label class="text-cyan mb-1" style="display: block;">R√©p√©titions</label>
                                <input type="number" id="rm-reps" class="input" placeholder="Ex: 8" required>
                            </div>
                            <div style="grid-column: span 2;">
                                <button type="submit" class="btn btn-primary" style="width: 100%;">Calculer</button>
                            </div>
                        </form>
                        <div id="rm-result"></div>
                    </div>
                `;
            }

            renderSessionsTab() {
                if (this.sessions.length === 0) {
                    return `
                        <div class="card text-center">
                            <div style="font-size: 4rem; margin-bottom: 1rem;">üìù</div>
                            <h3 class="text-white mb-2" style="font-size: 1.5rem;">Aucune s√©ance enregistr√©e</h3>
                            <p class="text-cyan mb-4">Commencez par cr√©er votre premi√®re s√©ance</p>
                            <button class="btn btn-primary" onclick="app.createSession()">‚ûï Nouvelle s√©ance</button>
                        </div>
                    `;
                }

                return `
                    <div class="card">
                        <div class="flex justify-between items-center mb-4" style="flex-wrap: wrap; gap: 1rem;">
                            <h2 class="text-white" style="font-size: 1.5rem; font-weight: bold;">üìù Mes s√©ances</h2>
                            <button class="btn btn-primary" onclick="app.createSession()">‚ûï Nouvelle s√©ance</button>
                        </div>
                        
                        ${this.sessions.map(session => {
                            const objectif = this.objectifs.find(o => o.value === session.objectif);
                            const badgeClass = session.objectif === 'force' ? 'badge-force' : 
                                              session.objectif === 'hypertrophie' ? 'badge-equilibre' : 'badge-endurance';
                            
                            return `
                                <div class="session-card">
                                    <div class="flex justify-between items-center mb-2" style="flex-wrap: wrap; gap: 0.5rem;">
                                        <div>
                                            <span class="badge ${badgeClass}">${objectif.label}</span>
                                            <span class="text-cyan" style="margin-left: 0.5rem;">${session.date}</span>
                                        </div>
                                        <div class="flex gap-2">
                                            <button class="btn btn-secondary" onclick="app.editSession(${session.id})" style="padding: 0.5rem 1rem;">‚úèÔ∏è</button>
                                            <button class="btn btn-danger" onclick="app.deleteSession(${session.id})" style="padding: 0.5rem 1rem;">üóëÔ∏è</button>
                                        </div>
                                    </div>
                                    <div class="text-white" style="font-size: 0.875rem;">
                                        üí™ ${session.exercices.length} exercices | 
                                        üéØ ${session.muscles.length} muscles
                                    </div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                `;
            }

            renderCoursTab() {
                return `
                    <div class="card">
                        <h2 class="text-white mb-4" style="font-size: 1.5rem; font-weight: bold;">üìö Cours & Ressources</h2>
                        
                        <div class="flex gap-2 mb-4" style="overflow-x: auto; flex-wrap: wrap;">
                            <button class="sub-tab-btn ${this.activeCoursTab === 'mobiles' ? 'active' : ''}" onclick="app.switchCoursTab('mobiles')">üéØ Mobiles</button>
                            <button class="sub-tab-btn ${this.activeCoursTab === 'nutrition' ? 'active' : ''}" onclick="app.switchCoursTab('nutrition')">üçé Nutrition</button>
                            <button class="sub-tab-btn ${this.activeCoursTab === 'hygiene' ? 'active' : ''}" onclick="app.switchCoursTab('hygiene')">üí§ Hygi√®ne de vie</button>
                            <button class="sub-tab-btn ${this.activeCoursTab === 'conseils' ? 'active' : ''}" onclick="app.switchCoursTab('conseils')">‚è±Ô∏è Conseils s√©ance</button>
                            <button class="sub-tab-btn ${this.activeCoursTab === 'quiz' ? 'active' : ''}" onclick="app.switchCoursTab('quiz')">üß† Quiz anatomique</button>
                            <button class="sub-tab-btn ${this.activeCoursTab === 'anatomie' ? 'active' : ''}" onclick="app.switchCoursTab('anatomie')">üìñ Planche anatomie</button>
                            <button class="sub-tab-btn ${this.activeCoursTab === 'exercices' ? 'active' : ''}" onclick="app.switchCoursTab('exercices')">üí™ Exercices de base</button>
                        </div>

                        ${this.activeCoursTab === 'mobiles' ? this.renderMobilesTab() : ''}
                        ${this.activeCoursTab === 'nutrition' ? this.renderNutritionTab() : ''}
                        ${this.activeCoursTab === 'hygiene' ? this.renderHygieneTab() : ''}
                        ${this.activeCoursTab === 'conseils' ? this.renderConseilsTab() : ''}
                        ${this.activeCoursTab === 'quiz' ? this.renderQuizTab() : ''}
                        ${this.activeCoursTab === 'anatomie' ? this.renderAnatomieTab() : ''}
                        ${this.activeCoursTab === 'exercices' ? this.renderExercicesTab() : ''}
                    </div>
                `;
            }

            renderMobilesTab() {
                return `
                    <div>
                        <h3 class="text-white mb-3" style="font-size: 1.25rem; font-weight: bold;">üéØ Les 3 Mobiles d'Entra√Ænement</h3>
                        <div class="table-responsive">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Mobile</th>
                                        <th>Charges</th>
                                        <th>S√©ries</th>
                                        <th>R√©p√©titions</th>
                                        <th>Repos</th>
                                        <th>Fr√©quence</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${coursData.mobiles.map(mobile => `
                                        <tr>
                                            <td><strong>${mobile.emoji} ${mobile.nom}</strong></td>
                                            <td>${mobile.charges}</td>
                                            <td>${mobile.series}</td>
                                            <td>${mobile.repetitions}</td>
                                            <td>${mobile.repos}</td>
                                            <td>${mobile.frequence}</td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>

                        ${coursData.mobiles.map(mobile => `
                            <div style="background: rgba(255, 255, 255, 0.05); border-radius: 1rem; padding: 1.5rem; margin: 1.5rem 0; border-left: 4px solid #06b6d4;">
                                <h4 class="text-cyan mb-2" style="font-size: 1.1rem; font-weight: bold;">${mobile.emoji} ${mobile.nom}</h4>
                                <p class="text-white mb-2"><strong>Objectif:</strong> ${mobile.objectif}</p>
                                <p class="text-white mb-2"><strong>Tempo:</strong> ${mobile.tempo}</p>
                                <p class="text-white mb-2"><strong>Exemples:</strong> ${mobile.exemples}</p>
                                <div class="info-box">
                                    <strong class="text-cyan">‚úÖ B√©n√©fices:</strong>
                                    <p class="text-white" style="margin-top: 0.5rem;">${mobile.benefices}</p>
                                </div>
                                <div style="background: rgba(239, 68, 68, 0.1); border-left: 4px solid #ef4444; border-radius: 0.5rem; padding: 1rem; margin-top: 1rem;">
                                    <strong style="color: #fca5a5;">‚ö†Ô∏è Pr√©cautions:</strong>
                                    <p class="text-white" style="margin-top: 0.5rem;">${mobile.precautions}</p>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;
            }

            renderNutritionTab() {
                return `
                    <div>
                        <h3 class="text-white mb-3" style="font-size: 1.25rem; font-weight: bold;">üçé Plans Nutritionnels</h3>
                        
                        ${Object.values(coursData.nutritionPlans).map(plan => `
                            <div class="nutrition-plan">
                                <h4 class="text-white mb-3" style="font-size: 1.2rem; font-weight: bold;">${plan.emoji} ${plan.nom}</h4>
                                
                                <div class="grid grid-cols-2 gap-3 mb-3">
                                    <div>
                                        <strong class="text-cyan">Calories:</strong>
                                        <p class="text-white">${plan.deficit || plan.surplus || plan.calories}</p>
                                    </div>
                                    <div>
                                        <strong class="text-cyan">Prot√©ines:</strong>
                                        <p class="text-white">${plan.proteines}</p>
                                    </div>
                                    <div>
                                        <strong class="text-cyan">Glucides:</strong>
                                        <p class="text-white">${plan.glucides}</p>
                                    </div>
                                    <div>
                                        <strong class="text-cyan">Lipides:</strong>
                                        <p class="text-white">${plan.lipides}</p>
                                    </div>
                                </div>

                                <div class="mb-3">
                                    <strong class="text-cyan">üìã Exemple de journ√©e type:</strong>
                                    <ul style="list-style: none; padding-left: 0; margin-top: 0.5rem;">
                                        ${plan.repas.map(repas => `
                                            <li class="text-white" style="padding: 0.5rem 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                                                ${repas}
                                            </li>
                                        `).join('')}
                                    </ul>
                                </div>

                                <div>
                                    <strong class="text-cyan">üí° Conseils:</strong>
                                    <ul style="list-style: disc; padding-left: 1.5rem; margin-top: 0.5rem;">
                                        ${plan.conseils.map(conseil => `
                                            <li class="text-white" style="margin: 0.5rem 0;">${conseil}</li>
                                        `).join('')}
                                    </ul>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;
            }

            renderHygieneTab() {
                return `
                    <div>
                        <h3 class="text-white mb-3" style="font-size: 1.25rem; font-weight: bold;">üí§ Hygi√®ne de Vie</h3>
                        
                        <div class="exercise-card">
                            <h4 class="text-cyan mb-2" style="font-size: 1.1rem; font-weight: bold;">üò¥ Sommeil</h4>
                            <ul style="list-style: disc; padding-left: 1.5rem;">
                                ${coursData.hygiene.sommeil.map(conseil => `
                                    <li class="text-white" style="margin: 0.75rem 0;">${conseil}</li>
                                `).join('')}
                            </ul>
                        </div>

                        <div class="exercise-card">
                            <h4 class="text-cyan mb-2" style="font-size: 1.1rem; font-weight: bold;">üíß Hydratation</h4>
                            <ul style="list-style: disc; padding-left: 1.5rem;">
                                ${coursData.hygiene.hydratation.map(conseil => `
                                    <li class="text-white" style="margin: 0.75rem 0;">${conseil}</li>
                                `).join('')}
                            </ul>
                        </div>

                        <div class="exercise-card">
                            <h4 class="text-cyan mb-2" style="font-size: 1.1rem; font-weight: bold;">üîÑ R√©cup√©ration</h4>
                            <ul style="list-style: disc; padding-left: 1.5rem;">
                                ${coursData.hygiene.recuperation.map(conseil => `
                                    <li class="text-white" style="margin: 0.75rem 0;">${conseil}</li>
                                `).join('')}
                            </ul>
                        </div>
                    </div>
                `;
            }

            renderConseilsTab() {
                return `
                    <div>
                        <h3 class="text-white mb-3" style="font-size: 1.25rem; font-weight: bold;">‚è±Ô∏è Conseils pour vos S√©ances</h3>
                        
                        <div class="exercise-card" style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(20, 184, 166, 0.1) 100%);">
                            <h4 class="text-cyan mb-2" style="font-size: 1.1rem; font-weight: bold;">‚è∞ Avant la s√©ance</h4>
                            <ul style="list-style: disc; padding-left: 1.5rem;">
                                ${coursData.conseilsSeance.avant.map(conseil => `
                                    <li class="text-white" style="margin: 0.75rem 0;">${conseil}</li>
                                `).join('')}
                            </ul>
                        </div>

                        <div class="exercise-card" style="background: linear-gradient(135deg, rgba(6, 182, 212, 0.1) 0%, rgba(59, 130, 246, 0.1) 100%);">
                            <h4 class="text-cyan mb-2" style="font-size: 1.1rem; font-weight: bold;">üèãÔ∏è Pendant la s√©ance</h4>
                            <ul style="list-style: disc; padding-left: 1.5rem;">
                                ${coursData.conseilsSeance.pendant.map(conseil => `
                                    <li class="text-white" style="margin: 0.75rem 0;">${conseil}</li>
                                `).join('')}
                            </ul>
                        </div>

                        <div class="exercise-card" style="background: linear-gradient(135deg, rgba(249, 115, 22, 0.1) 0%, rgba(251, 146, 60, 0.1) 100%);">
                            <h4 class="text-cyan mb-2" style="font-size: 1.1rem; font-weight: bold;">‚úÖ Apr√®s la s√©ance</h4>
                            <ul style="list-style: disc; padding-left: 1.5rem;">
                                ${coursData.conseilsSeance.apres.map(conseil => `
                                    <li class="text-white" style="margin: 0.75rem 0;">${conseil}</li>
                                `).join('')}
                            </ul>
                        </div>
                    </div>
                `;
            }

            renderQuizTab() {
                if (this.quizCurrentQuestion >= coursData.quizQuestions.length) {
                    return '<div class="text-white">Chargement des r√©sultats...</div>';
                }

                const question = coursData.quizQuestions[this.quizCurrentQuestion];
                
                return `
                    <div>
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-white" style="font-size: 1.25rem; font-weight: bold;">üß† Quiz Anatomique</h3>
                            <span class="text-cyan">Question ${this.quizCurrentQuestion + 1} / ${coursData.quizQuestions.length}</span>
                        </div>
                        
                        <div style="background: rgba(6, 182, 212, 0.1); border-radius: 1rem; padding: 1.5rem; margin-bottom: 1.5rem;">
                            <p class="text-white" style="font-size: 1.1rem; line-height: 1.6;">${question.question}</p>
                        </div>

                        <div>
                            ${question.options.map((option, index) => `
                                <div class="quiz-option" onclick="app.answerQuiz(${index})">
                                    ${String.fromCharCode(65 + index)}. ${option}
                                </div>
                            `).join('')}
                        </div>

                        <div id="quiz-explanation"></div>

                        <div style="margin-top: 2rem; text-align: center;">
                            <div class="text-cyan">Score actuel: ${this.quizScore} / ${this.quizCurrentQuestion + 1}</div>
                        </div>
                    </div>
                `;
            }

            renderAnatomieTab() {
                return `
                    <div>
                        <h3 class="text-white mb-3" style="font-size: 1.25rem; font-weight: bold;">üìñ Planche Anatomique</h3>
                        
                        <div class="muscle-diagram">
                            <h4 class="text-cyan mb-3" style="font-size: 1.1rem;">Vue Ant√©rieure (Devant)</h4>
                            <div style="margin-bottom: 2rem;">
                                <div class="muscle-label">Delto√Ødes (√âpaules)</div>
                                <div class="muscle-label">Pectoraux (Poitrine)</div>
                                <div class="muscle-label">Biceps (Avant du bras)</div>
                                <div class="muscle-label">Grand droit (Abdominaux)</div>
                                <div class="muscle-label">Obliques</div>
                                <div class="muscle-label">Quadriceps (Avant cuisse)</div>
                                <div class="muscle-label">Tibial ant√©rieur</div>
                            </div>

                            <h4 class="text-cyan mb-3" style="font-size: 1.1rem;">Vue Post√©rieure (Derri√®re)</h4>
                            <div>
                                <div class="muscle-label">Trap√®ze</div>
                                <div class="muscle-label">Delto√Ødes post√©rieurs</div>
                                <div class="muscle-label">Grand dorsal (Dos)</div>
                                <div class="muscle-label">Triceps (Arri√®re du bras)</div>
                                <div class="muscle-label">Lombaires</div>
                                <div class="muscle-label">Fessiers</div>
                                <div class="muscle-label">Ischio-jambiers (Arri√®re cuisse)</div>
                                <div class="muscle-label">Mollets (Gastrocn√©miens)</div>
                            </div>
                        </div>

                        <div class="info-box" style="margin-top: 2rem;">
                            <strong class="text-cyan">üí° Astuce:</strong>
                            <p class="text-white" style="margin-top: 0.5rem;">
                                Utilisez cette planche pour r√©viser l'emplacement des muscles avant de passer le quiz anatomique !
                            </p>
                        </div>
                    </div>
                `;
            }

            renderExercicesTab() {
                return `
                    <div>
                        <h3 class="text-white mb-3" style="font-size: 1.25rem; font-weight: bold;">üí™ Exercices de Base par Groupe Musculaire</h3>
                        
                        ${Object.entries(coursData.exercicesBase).map(([groupe, exercices]) => `
                            <div class="exercise-card">
                                <h4 class="text-cyan mb-3" style="font-size: 1.1rem; font-weight: bold; text-transform: capitalize;">
                                    üéØ ${groupe}
                                </h4>
                                
                                ${exercices.map(ex => `
                                    <div style="background: rgba(255, 255, 255, 0.05); border-radius: 0.75rem; padding: 1rem; margin-bottom: 1rem; border-left: 3px solid #06b6d4;">
                                        <h5 class="text-white mb-1" style="font-weight: bold;">${ex.nom}</h5>
                                        <p class="text-cyan" style="font-size: 0.9rem; margin-bottom: 0.5rem;">${ex.description}</p>
                                        <p class="text-white" style="font-size: 0.9rem; margin-bottom: 0.5rem;">
                                            <strong>Ex√©cution:</strong> ${ex.execution}
                                        </p>
                                        <p style="font-size: 0.85rem; color: #67e8f9;">
                                            <strong>Muscles:</strong> ${ex.muscles}
                                        </p>
                                    </div>
                                `).join('')}
                            </div>
                        `).join('')}
                    </div>
                `;
            }

            renderSessionForm() {
                const currentObjectif = this.objectifs.find(o => o.value === this.currentSession.objectif);
                
                return `
                    <div class="card">
                        <div class="flex justify-between items-center mb-4" style="flex-wrap: wrap; gap: 1rem;">
                            <h2 class="text-white" style="font-size: 1.5rem; font-weight: bold;">
                                ${this.sessions.some(s => s.id === this.currentSession.id) ? '‚úèÔ∏è Modifier' : '‚ûï Nouvelle'} s√©ance
                            </h2>
                            <div class="flex gap-2">
                                <button class="btn btn-success" onclick="app.saveSession()">üíæ Enregistrer</button>
                                <button class="btn btn-secondary" onclick="app.cancelSession()">‚ùå Annuler</button>
                            </div>
                        </div>

                        <div style="background: rgba(255, 255, 255, 0.05); border-radius: 1rem; padding: 1.5rem;">
                            <div class="grid grid-cols-2 gap-3 mb-4">
                                <div>
                                    <label class="text-cyan mb-1" style="display: block; font-weight: 500;">Date</label>
                                    <input type="date" id="session-date" class="input" value="${this.currentSession.date}">
                                </div>
                                <div>
                                    <label class="text-cyan mb-1" style="display: block; font-weight: 500;">Objectif</label>
                                    <select id="session-objectif" class="input">
                                        ${this.objectifs.map(obj => `<option value="${obj.value}" ${obj.value === this.currentSession.objectif ? 'selected' : ''}>${obj.label}</option>`).join('')}
                                    </select>
                                </div>
                            </div>

                            <div style="background: linear-gradient(135deg, rgba(251, 146, 60, 0.2) 0%, rgba(249, 115, 22, 0.2) 100%); border-radius: 1rem; padding: 1.5rem; margin-bottom: 1.5rem; border: 1px solid rgba(251, 146, 60, 0.3);">
                                <h3 class="text-white mb-2" style="font-size: 1.25rem; font-weight: bold;">üî• √âchauffement</h3>
                                <div style="display: flex; flex-direction: column; gap: 1rem;">
                                    <div>
                                        <label style="display: block; color: #fed7aa; margin-bottom: 0.5rem;">1. Cardio (5-10 min)</label>
                                        <input type="text" id="echauf-cardio" class="input" placeholder="Ex: V√©lo" value="${this.currentSession.echauffement.cardio}">
                                    </div>
                                    <div>
                                        <label style="display: block; color: #fed7aa; margin-bottom: 0.5rem;">2. Mobilisation articulaire</label>
                                        <input type="text" id="echauf-mobilisation" class="input" placeholder="Ex: Rotations" value="${this.currentSession.echauffement.mobilisation}">
                                    </div>
                                    <div>
                                        <label style="display: block; color: #fed7aa; margin-bottom: 0.5rem;">3. Activation musculaire</label>
                                        <input type="text" id="echauf-activation" class="input" placeholder="Ex: S√©ries l√©g√®res" value="${this.currentSession.echauffement.activation}">
                                    </div>
                                </div>
                            </div>

                            <div style="background: rgba(6, 182, 212, 0.2); border-radius: 1rem; padding: 1.5rem; margin-bottom: 1.5rem; border: 1px solid rgba(6, 182, 212, 0.3);">
                                <div class="flex justify-between items-center mb-2" style="flex-wrap: wrap; gap: 1rem;">
                                    <h3 class="text-white" style="font-size: 1.25rem; font-weight: bold;">üéØ Exercices - ${currentObjectif.label}</h3>
                                    <button class="btn btn-primary" onclick="app.addExercice()">‚ûï Ajouter</button>
                                </div>
                                
                                <div id="exercices-list"></div>
                            </div>

                            <div class="card mb-4">
                                <h3 class="text-white mb-2" style="font-size: 1.25rem; font-weight: bold;">üí™ Muscles travaill√©s</h3>
                                <div class="grid grid-cols-5 gap-2" id="muscles-list"></div>
                            </div>

                            <div class="grid grid-cols-2 gap-3">
                                <div>
                                    <label class="text-cyan mb-1" style="display: block; font-weight: 500;">Ressenti</label>
                                    <textarea id="session-ressenti" class="input" style="height: 6rem;" placeholder="Comment vous √™tes-vous senti">${this.currentSession.ressenti}</textarea>
                                </div>
                                <div>
                                    <label class="text-cyan mb-1" style="display: block; font-weight: 500;">Progression</label>
                                    <textarea id="session-progression" class="input" style="height: 6rem;" placeholder="Augmentation charges">${this.currentSession.progression}</textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }

            attachLoginEvents() {
                const loginForm = document.getElementById('login-form');
                const signupForm = document.getElementById('signup-form');
                
                if (loginForm) {
                    loginForm.addEventListener('submit', (e) => this.handleLogin(e));
                }
                
                if (signupForm) {
                    signupForm.addEventListener('submit', (e) => this.handleSignup(e));
                }
            }

            attachResetEvents() {
                const resetForm = document.getElementById('reset-form');
                const usernameInput = document.getElementById('reset-username');
                
                if (usernameInput) {
                    usernameInput.addEventListener('blur', () => {
                        const username = usernameInput.value;
                        if (username) {
                            const userKey = `user-${username}`;
                            const userResult = storage.get(userKey, true);
                            
                            if (userResult.exists) {
                                const userData = JSON.parse(userResult.value);
                                const questionContainer = document.getElementById('question-container');
                                const questionLabel = document.getElementById('question-label');
                                const passwordContainer = document.getElementById('password-container');
                                
                                questionLabel.textContent = securityQuestions[userData.securityQuestion];
                                questionContainer.style.display = 'block';
                                passwordContainer.style.display = 'block';
                            }
                        }
                    });
                }
                
                if (resetForm) {
                    resetForm.addEventListener('submit', (e) => this.handlePasswordReset(e));
                }
            }

            attachDashboardEvents() {
                const rmForm = document.getElementById('rm-form');
                if (rmForm) {
                    rmForm.addEventListener('submit', (e) => this.calculateRM(e));
                }
            }

            attachSessionFormEvents() {
                this.renderExercices();
                this.renderMuscles();
            }

            renderExercices() {
                const container = document.getElementById('exercices-list');
                if (!container) return;
                
                container.innerHTML = this.currentSession.exercices.map((ex, index) => `
                    <div style="background: rgba(255, 255, 255, 0.1); border-radius: 0.75rem; padding: 1rem; margin-bottom: 0.75rem; border: 1px solid rgba(255, 255, 255, 0.2);">
                        <div class="grid grid-cols-5 gap-2 mb-2">
                            <input type="text" class="input" placeholder="Exercice" value="${ex.nom}" style="grid-column: span 2;" data-index="${index}" data-field="nom">
                            <input type="text" class="input" placeholder="S√©ries" value="${ex.series}" data-index="${index}" data-field="series">
                            <input type="text" class="input" placeholder="Reps" value="${ex.repetitions}" data-index="${index}" data-field="repetitions">
                            <input type="text" class="input" placeholder="Charge" value="${ex.charge}" data-index="${index}" data-field="charge">
                        </div>
                        <div class="flex gap-2">
                            <input type="text" class="input" placeholder="Repos ex: 90s" value="${ex.repos}" style="flex: 1;" data-index="${index}" data-field="repos">
                            <button class="btn btn-danger" onclick="app.removeExercice(${index})">üóëÔ∏è</button>
                        </div>
                    </div>
                `).join('');

                container.querySelectorAll('input').forEach(input => {
                    input.addEventListener('input', (e) => {
                        const index = parseInt(e.target.dataset.index);
                        const field = e.target.dataset.field;
                        this.currentSession.exercices[index][field] = e.target.value;
                    });
                });
            }

            renderMuscles() {
                const container = document.getElementById('muscles-list');
                if (!container) return;
                
                container.innerHTML = this.musclesList.map(muscle => `
                    <button class="muscle-btn ${this.currentSession.muscles.includes(muscle) ? 'active' : ''}" onclick="app.toggleMuscle('${muscle}')">
                        ${muscle}
                    </button>
                `).join('');
            }
        }

        const app = new LivretApp();
    </script>
</body>
</html>